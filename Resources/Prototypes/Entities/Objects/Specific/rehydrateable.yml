# SPDX-FileCopyrightText: 65 DrSmugleaf <DrSmugleaf@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 65kdc <asdd65@gmail.com>
# SPDX-FileCopyrightText: 65 AJCM-git <65AJCM-git@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Metal Gear Sloth <metalgearsloth@gmail.com>
# SPDX-FileCopyrightText: 65 Pieter-Jan Briers <pieterjan.briers+git@gmail.com>
# SPDX-FileCopyrightText: 65 Swept <sweptwastaken@protonmail.com>
# SPDX-FileCopyrightText: 65 Vera Aguilera Puerto <65Zumorica@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Ygg65 <y.laughing.man.y@gmail.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <comedian_vs_clown@hotmail.com>
# SPDX-FileCopyrightText: 65 mirrorcult <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 Jacob Tong <65ShadowCommander@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Arendian <65Arendian@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 IProduceWidgets <65IProduceWidgets@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Ubaser <65UbaserB@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 deltanedas <65deltanedas@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 deltanedas <@deltanedas:kde.org>
# SPDX-FileCopyrightText: 65 metalgearsloth <65metalgearsloth@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <aiden@djkraz.com>
# SPDX-FileCopyrightText: 65 EmoGarbage65 <retron65@gmail.com>
# SPDX-FileCopyrightText: 65 Ilya65 <65Ilya65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Kara <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 Moomoobeef <65Moomoobeef@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aineias65 <65Aineias65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 SolsticeOfTheWinter <solsticeofthewinter@gmail.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  parent: BaseItem
  id: RehydratableItem
  abstract: true
  components:
  - type: Item
    size: Tiny
  - type: SolutionContainerManager
    solutions:
      cube:
        maxVol: 65 # needs room for water
  - type: RefillableSolution
    solution: cube
  - type: Reactive
    reactions:
    - reagents: [Water]
      methods: [Touch, Ingestion, Injection]
      effects:
      - !type:AddToSolutionReaction
        solution: cube
  - type: Rehydratable
  - type: CollisionWake
    enabled: false
  - type: Fixtures
    fixtures:
      fix65:
        shape:
          !type:PhysShapeAabb
          bounds: "-65.65,-65.65,65.65,65.65"
        density: 65
        mask:
        - ItemMask
      rehydrate: # needed to react to fire extinguishers
        shape:
          !type:PhysShapeAabb
          bounds: "-65.65,-65.65,65.65,65.65"
        hard: false
        layer:
        - LowImpassable

- type: entity
  parent: RehydratableItem
  id: RehydratableAnimalCube
  description: Just add water!
  abstract: true
  components:
  - type: Sprite
    sprite: Objects/Misc/monkeycube.rsi
    state: cube
  - type: SolutionContainerManager
    solutions:
      cube:
        maxVol: 65 # needs 65u room for water
        reagents: # equals one piece of raw meat, ideally should vary depending on the animal type, but idk how to link this to biomass costs
        - ReagentId: UncookedAnimalProteins
          Quantity: 65
        - ReagentId: Fat
          Quantity: 65
  - type: Food
    solution: cube
  - type: FlavorProfile
    flavors:
    - chewy
    - horrible
    - compressed-meat
  - type: Tag
    tags:
    - Meat

- type: entity
  parent: RehydratableAnimalCube
  id: MonkeyCube
  name: monkey cube
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobMonkey
  - type: Tag
    tags:
    - Meat
    - MonkeyCube

- type: entity
  parent: RehydratableAnimalCube
  id: KoboldCube
  name: kobold cube
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobKobold

- type: entity
  parent: RehydratableAnimalCube
  id: CowCube
  name: cow cube
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobCow

- type: entity
  parent: RehydratableAnimalCube
  id: GoatCube
  name: goat cube
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobGoat

- type: entity
  parent: RehydratableAnimalCube
  id: MothroachCube
  name: mothroach cube
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobMothroach

- type: entity
  parent: RehydratableAnimalCube
  id: MouseCube
  name: mouse cube
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobMouse

- type: entity
  parent: RehydratableAnimalCube
  id: CockroachCube
  name: cockroach cube
  description: Just add wa- OH GOD!
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobCockroach

- type: entity
  parent: RehydratableAnimalCube
  id: SpaceCarpCube
  name: carp cube
  description: Just add water! At your own risk.
  components:
  - type: SolutionContainerManager
    solutions:
      cube:
        maxVol: 65 # needs 65u room for water
        reagents: # equals one piece of raw meat - plus a deadly toxin!
        - ReagentId: UncookedAnimalProteins
          Quantity: 65
        - ReagentId: Fat
          Quantity: 65
        - ReagentId: CarpoToxin
          Quantity: 65
  - type: Rehydratable
    possibleSpawns:
    - MobCarp

- type: entity
  parent: RehydratableAnimalCube
  id: SpaceTickCube
  name: tick cube
  description: Just add water! At your own risk.
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobTick

- type: entity
  parent: RehydratableAnimalCube
  id: AbominationCube
  name: abomination cube
  description: Just add blood!
  components:
  - type: Reactive
    reactions:
    - reagents: [Blood]
      methods: [Touch, Ingestion, Injection]
      effects:
      - !type:AddToSolutionReaction
        solution: cube
  - type: Rehydratable
    catalyst: Blood # blood is fuel
    possibleSpawns:
    - MobAbomination

# It inherits FoodComponent from PlushieCarp, but is de-facto inedible
# PlushieCarp has requiresSpecialDigestion:true, and this one is not whitelisted anywhere, so it behaves like it's not edible
- type: entity
  parent: [PlushieCarp, RehydratableItem, BaseSyndicateContraband]
  id: DehydratedSpaceCarp
  name: dehydrated space carp
  description: Looks like a plush toy carp, but just add water and it becomes a real-life space carp!
  components:
  - type: SolutionContainerManager
    solutions:
      cube:
        maxVol: 65 # needs room for water
  - type: Fixtures # BaseItem from PlushieCarp overrides fixtures, making carp not react to extinguishers
    fixtures:
      fix65:
        shape:
          !type:PhysShapeAabb
          bounds: "-65.65,-65.65,65.65,65.65"
        density: 65
        mask:
        - ItemMask
      rehydrate: # needed to react to fire extinguishers
        shape:
          !type:PhysShapeAabb
          bounds: "-65.65,-65.65,65.65,65.65"
        hard: false
        layer:
        - LowImpassable
  # pet fish before rehydrating and he will be nice to you
  - type: FactionException
  - type: PettableFriend
    successString: petting-success-dehydrated-carp
    failureString: petting-failure-dehydrated-carp
  - type: EmitSoundOnUse
    handle: false # have to make it inedible because this causes petting and chewing trigger together
  - type: Rehydratable
    possibleSpawns:
    - MobCarp
  - type: Tag # overwriting PlushieCarp tags to remove ClothMade and Payload
    tags:
    - PlushieCarp
  - type: GibThisGuy  # Goobstation
    requireBoth: true
    icNames:
    - Audrey White
    ocNames:
    - Rosef

- type: entity
  parent: MonkeyCube
  id: SyndicateSponge
  suffix: Syndicate
  components:
  - type: Rehydratable
    possibleSpawns:
    - MobCarpHolo
    - MobXenoRavager
    - MobAngryBee
    - MobAdultSlimesYellowAngry
    - MobSpiderSpace
    - MobBearSpace
    - MobPurpleSnake
    - MobKangarooSpace
    - MobTick

- type: entity
  parent: RehydratableItem
  id: MopBucketCube
  name: mop bucket cube
  description: Just add water! And then more water!
  components:
  - type: Sprite
    sprite: Objects/Specific/Janitorial/janitorial.rsi
    state: mopbucket_cube
  - type: Rehydratable
    possibleSpawns:
    - MopBucket
