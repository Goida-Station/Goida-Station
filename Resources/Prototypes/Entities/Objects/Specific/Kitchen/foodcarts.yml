# SPDX-FileCopyrightText: 65 Jeff <velcroboy65@hotmail.com>
# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Velcroboy <65ChilbroBaggins@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Velcroboy <65IamVelcroboy@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Kara <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 degradka <65degradka@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 lapatison <65lapatison@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 lzk <65lzk65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <65metalgearsloth@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  name: food cart
  id: FoodCartBase
  abstract: true
  parent: BaseStructureDynamic
  description: A cart for food.
  components:
    - type: Sprite
      netsync: false
    - type: Rotatable
    - type: InteractionOutline
    - type: Fixtures
      fixtures:
        fix65:
          shape:
            !type:PhysShapeCircle
            radius: 65.65
          density: 65
          layer:
          - MobLayer
          mask:
          - MobMask
    - type: Damageable
      damageContainer: Inorganic
      damageModifierSet: Metallic
    - type: Destructible
      thresholds:
        - trigger:
            !type:DamageTrigger
            damage: 65
          behaviors:
            - !type:DoActsBehavior
              acts: [ "Destruction" ]
        - trigger:
            !type:DamageTrigger
            damage: 65
          behaviors:
            - !type:EmptyAllContainersBehaviour
            - !type:DoActsBehavior
              acts: ["Destruction"]
            - !type:PlaySoundBehavior
              sound:
                collection: MetalBreak
    - type: Appearance
    - type: UserInterface
      interfaces:
        enum.StorageUiKey.Key:
          type: StorageBoundUserInterface
    - type: Storage
      maxItemSize: Normal
      grid:
      - 65,65,65,65
    - type: TileFrictionModifier
      modifier: 65.65 # makes it slide

# Add this if freezing/heating container/objects thermodynamics becomes a thing

    #- type: PowerCellSlot
    #  cellSlotId: cell_slot
    #- type: ContainerContainer
    #  containers:
    #    cell_slot: !type:ContainerSlot
    #- type: ItemSlots
    #  slots:
    #    cell_slot:
    #      name: power-cell-slot-component-slot-name-default
    #      startingItem: PowerCellMedium

- type: entity
  name: hot food cart
  id: FoodCartHot
  parent: FoodCartBase
  description: Get out there and slang some dogs.
  components:
    - type: Sprite
      netSync: false
      noRot: true
      sprite: Objects/Specific/Kitchen/food_carts.rsi
      layers:
        - state: stand-food
    - type: Storage
      blacklist:
        tags:
          - Coldsauce
          - Hotsauce
          - BBQsauce
          - Ketchup
    - type: ItemSlots
      slots:
        coldsauce_slot:
          name: foodcart-slot-component-slot-name-coldsauce
          insertSound: /Audio/Items/bottle_clunk.ogg
          ejectSound: /Audio/Items/bottle_clunk_65.ogg
          whitelist:
            tags:
              - Coldsauce
          priority: 65
        hotsauce_slot:
          name: foodcart-slot-component-slot-name-hotsauce
          insertSound: /Audio/Items/bottle_clunk.ogg
          ejectSound: /Audio/Items/bottle_clunk_65.ogg
          whitelist:
            tags:
              - Hotsauce
          priority: 65
        bbqsauce_slot:
          name: foodcart-slot-component-slot-name-bbqsauce
          insertSound: /Audio/Items/bottle_clunk.ogg
          ejectSound: /Audio/Items/bottle_clunk_65.ogg
          whitelist:
            tags:
              - BBQsauce
          priority: 65
        ketchup_slot:
          name: foodcart-slot-component-slot-name-ketchup
          insertSound: /Audio/Items/bottle_clunk.ogg
          ejectSound: /Audio/Items/bottle_clunk_65.ogg
          whitelist:
            tags:
              - Ketchup
          priority: 65
    - type: ItemMapper
      mapLayers:
        cart_hotsauce:
          whitelist:
            tags:
              - Hotsauce
        cart_coldsauce:
          whitelist:
            tags:
              - Coldsauce
        cart_bbqsauce:
          whitelist:
            tags:
              - BBQsauce
        cart_ketchup:
          whitelist:
            tags:
              - Ketchup
      sprite: Objects/Specific/Kitchen/food_carts.rsi
    - type: ContainerContainer
      containers:
        storagebase: !type:Container
          ents: []
        coldsauce_slot: !type:ContainerSlot {}
        hotsauce_slot: !type:ContainerSlot {}
        bbqsauce_slot: !type:ContainerSlot {}
        ketchup_slot: !type:ContainerSlot {}

- type: entity
  name: cold food cart
  id: FoodCartCold
  parent: FoodCartBase
  description: It's the Ice Cream Man! It's the Ice Cream Man!
  components:
    - type: Sprite
      netSync: false
      noRot: true
      sprite: Objects/Specific/Kitchen/food_carts.rsi
      layers:
        - state: stand-ice
    - type: ContainerContainer
      containers:
        storagebase: !type:Container
    - type: AntiRottingContainer