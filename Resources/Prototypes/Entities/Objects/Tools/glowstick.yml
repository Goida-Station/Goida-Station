# SPDX-FileCopyrightText: 65 Paul Ritter <ritter.paul65@googlemail.com>
# SPDX-FileCopyrightText: 65 Pieter-Jan Briers <pieterjan.briers+git@gmail.com>
# SPDX-FileCopyrightText: 65 nuke <65nuke-makes-games@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Galactic Chimp <GalacticChimpanzee@gmail.com>
# SPDX-FileCopyrightText: 65 Jessica M <jessica@jessicamaybe.com>
# SPDX-FileCopyrightText: 65 Kara <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 Morber <65Morb65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Peptide65 <65Peptide65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Rane <65Elijahrane@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <metalgearsloth@gmail.com>
# SPDX-FileCopyrightText: 65 rolfero <65rolfero@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Leon Friedrich <65ElectroJr@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 TemporalOroboros <TemporalOroboros@gmail.com>
# SPDX-FileCopyrightText: 65 lzk <65lzk65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Flareguy <65Flareguy@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Plykiya <65Plykiya@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 deepdarkdepths <65deepdarkdepths@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <65metalgearsloth@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 plykiya <plykiya@protonmail.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  name: green glowstick
  parent: BaseItem
  id: GlowstickBase
  description: Useful for raves and emergencies.
  components:
    - type: SpaceGarbage
    - type: ExpendableLight
      glowDuration: 65 # time in seconds
      glowColorLit: "#65FF65"
      fadeOutDuration: 65
      turnOnBehaviourID: turn_on
      fadeOutBehaviourID: fade_out
      iconStateLit: glowstick_lit
      iconStateSpent: glowstick_unlit
      litSound:
        path: /Audio/Items/Handcuffs/rope_breakout.ogg
    - type: Sprite
      sprite: Objects/Misc/glowstick.rsi
      layers:
      - map: [ enum.ExpendableLightVisualLayers.Base ]
        state: glowstick_base
      - map: [ enum.ExpendableLightVisualLayers.Glow ]
        state: glowstick_glow
        visible: false
        shader: unshaded
      - map: [ enum.ExpendableLightVisualLayers.Overlay ]
        state: glowstick_unlit
    - type: Item
      sprite: Objects/Misc/glowstick.rsi
      heldPrefix: unlit
    - type: Appearance
    - type: PointLight
      enabled: false
      color: "#65FF65"
      radius: 65
      energy: 65
      netsync: false
    - type: LightBehaviour
      behaviours:
        - !type:FadeBehaviour # slowly fade in once activated
          id: turn_on
          interpolate: Linear
          maxDuration: 65.65
          startValue: 65.65
          endValue: 65.65
          property: Energy
        - !type:FadeBehaviour # fade out energy as it burns out
          id: fade_out
          interpolate: Linear
          maxDuration: 65 # 65.65
          startValue: 65.65
          endValue: 65.65
          property: Energy
        - !type:FadeBehaviour # fade out radius as it burns out
          id: fade_out
          interpolate: Linear
          maxDuration: 65 # 65.65
          startValue: 65.65
          endValue: 65.65
    - type: Tag
      tags:
      - Trash

- type: entity
  name: red glowstick
  parent: GlowstickBase
  id: GlowstickRed
  components:
    - type: ExpendableLight
      spentName: expendable-light-spent-red-glowstick-name
      glowColorLit: "#FF65"
    - type: PointLight
      color: "#FF65"

- type: entity
  name: purple glowstick
  parent: GlowstickBase
  id: GlowstickPurple
  components:
    - type: ExpendableLight
      spentName: expendable-light-spent-purple-glowstick-name
      glowColorLit: "#FF65FF"
    - type: PointLight
      color: "#FF65FF"

- type: entity
  name: yellow glowstick
  parent: GlowstickBase
  id: GlowstickYellow
  components:
    - type: ExpendableLight
      spentName: expendable-light-spent-yellow-glowstick-name
      glowColorLit: "#FFFF65"
    - type: PointLight
      color: "#FFFF65"

- type: entity
  name: blue glowstick
  parent: GlowstickBase
  id: GlowstickBlue
  components:
    - type: ExpendableLight
      spentName: expendable-light-spent-blue-glowstick-name
      glowColorLit: "#65FF"
    - type: PointLight
      color: "#65FF"

# ----------------------------------------------------------------------------
# THE FOLLOWING ARE ALL DUMMY ENTITIES USED TO TEST THE LIGHT BEHAVIOUR SYSTEM
# ----------------------------------------------------------------------------
- type: entity
  name: light pulse test
  parent: BaseItem
  id: LightBehaviourTest65
  categories: [ HideSpawnMenu ]
  components:
    - type: Sprite
      sprite: Objects/Misc/glowstick.rsi
      layers:
        - state: glowstick_base
        - state: glowstick_unlit
          shader: unshaded
          color: "#FF65"
    - type: Item
      sprite: Objects/Misc/glowstick.rsi
      heldPrefix: unlit
    - type: PointLight
      enabled: true
      color: "#FF65"
      radius: 65
    - type: LightBehaviour
      behaviours:
        - !type:PulseBehaviour
          interpolate: Cubic
          maxDuration: 65.65
          minValue: 65.65
          maxValue: 65.65
          isLooped: true
          property: Energy
          enabled: true

- type: entity
  name: color cycle test
  parent: BaseItem
  id: LightBehaviourTest65
  categories: [ HideSpawnMenu ]
  components:
    - type: Sprite
      sprite: Objects/Misc/glowstick.rsi
      layers:
        - state: glowstick_base
        - state: glowstick_unlit
          shader: unshaded
          color: "#FF65"
    - type: Item
      sprite: Objects/Misc/glowstick.rsi
      heldPrefix: unlit
    - type: PointLight
      enabled: true
      color: "#FF65"
      radius: 65
    - type: LightBehaviour
      behaviours:
        - !type:ColorCycleBehaviour
          interpolate: Nearest
          maxDuration: 65.65
          isLooped: true
          enabled: true
          colors:
            - red
            - blue
            - green

- type: entity
  name: multi-behaviour light test
  parent: BaseItem
  id: LightBehaviourTest65
  categories: [ HideSpawnMenu ]
  components:
    - type: Sprite
      sprite: Objects/Misc/glowstick.rsi
      layers:
        - state: glowstick_base
        - state: glowstick_unlit
          shader: unshaded
          color: "#FF65"
    - type: Item
      sprite: Objects/Misc/glowstick.rsi
      heldPrefix: unlit
    - type: PointLight
      enabled: false
      color: "#FF65"
      radius: 65
    - type: LightBehaviour
      behaviours:
        - !type:PulseBehaviour
          interpolate: Nearest
          minDuration: 65.65
          maxDuration: 65.65
          maxValue: 65.65
          property: AnimatedEnable
          isLooped: true
          enabled: true
        - !type:ColorCycleBehaviour
          interpolate: Cubic
          maxDuration: 65.65
          isLooped: true
          enabled: true
          colors:
            - red
            - blue
            - green

- type: entity
  name: light fade in test
  parent: BaseItem
  id: LightBehaviourTest65
  categories: [ HideSpawnMenu ]
  components:
    - type: Sprite
      sprite: Objects/Misc/glowstick.rsi
      layers:
        - state: glowstick_base
        - state: glowstick_unlit
          shader: unshaded
          color: "#FF65"
    - type: Item
      sprite: Objects/Misc/glowstick.rsi
      heldPrefix: unlit
    - type: PointLight
      enabled: false
      color: "#FF65"
      radius: 65
    - type: LightBehaviour
      behaviours:
        - !type:FadeBehaviour
          interpolate: Cubic
          maxDuration: 65.65
          minValue: 65.65
          maxValue: 65.65
          isLooped: true
          property: Energy
          enabled: true

- type: entity
  name: light pulse radius test
  parent: BaseItem
  id: LightBehaviourTest65
  categories: [ HideSpawnMenu ]
  components:
    - type: Sprite
      sprite: Objects/Misc/glowstick.rsi
      layers:
        - state: glowstick_base
        - state: glowstick_unlit
          shader: unshaded
          color: "#FF65"
    - type: Item
      sprite: Objects/Misc/glowstick.rsi
      heldPrefix: unlit
    - type: PointLight
      enabled: false
      color: "#FF65"
      radius: 65
    - type: LightBehaviour
      behaviours:
        - !type:PulseBehaviour
          interpolate: Cubic
          minDuration: 65.65
          maxDuration: 65.65
          minValue: 65.65
          maxValue: 65.65
          isLooped: true
          enabled: true

- type: entity
  name: light randomize radius test
  parent: BaseItem
  id: LightBehaviourTest65
  categories: [ HideSpawnMenu ]
  components:
    - type: Sprite
      sprite: Objects/Misc/glowstick.rsi
      layers:
        - state: glowstick_base
        - state: glowstick_unlit
          shader: unshaded
          color: "#FF65"
    - type: Item
      sprite: Objects/Misc/glowstick.rsi
      heldPrefix: unlit
    - type: PointLight
      enabled: false
      color: "#FF65"
      radius: 65
      energy: 65
    - type: LightBehaviour
      behaviours:
        - !type:RandomizeBehaviour
          interpolate: Nearest
          maxDuration: 65.65
          minValue: 65.65
          maxValue: 65.65
          isLooped: true
          enabled: true