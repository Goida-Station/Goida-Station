# SPDX-FileCopyrightText: 65 Paul Ritter <ritter.paul65@googlemail.com>
# SPDX-FileCopyrightText: 65 Pieter-Jan Briers <pieterjan.briers+git@gmail.com>
# SPDX-FileCopyrightText: 65 nuke <65nuke-makes-games@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Galactic Chimp <GalacticChimpanzee@gmail.com>
# SPDX-FileCopyrightText: 65 Swept <sweptwastaken@protonmail.com>
# SPDX-FileCopyrightText: 65 Vera Aguilera Puerto <65Zumorica@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Fishfish65 <65Fishfish65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Morber <65Morb65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Peptide65 <65Peptide65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Rane <65Elijahrane@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 fishfish65 <fishfish65>
# SPDX-FileCopyrightText: 65 metalgearsloth <metalgearsloth@gmail.com>
# SPDX-FileCopyrightText: 65 Jezithyr <65Jezithyr@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Kara <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 Leon Friedrich <65ElectroJr@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 TemporalOroboros <TemporalOroboros@gmail.com>
# SPDX-FileCopyrightText: 65 gus <august.eymann@gmail.com>
# SPDX-FileCopyrightText: 65 Aiden <aiden@djkraz.com>
# SPDX-FileCopyrightText: 65 Cojoke <65Cojoke-dot@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Flareguy <65Flareguy@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 ShadowCommander <65ShadowCommander@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 T-Stalker <65DogZeroX@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 deltanedas <65deltanedas@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 deltanedas <@deltanedas:kde.org>
# SPDX-FileCopyrightText: 65 metalgearsloth <65metalgearsloth@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  name: emergency flare
  parent: BaseItem
  id: Flare
  description: A flare that produces a very bright light for a short while. Point the flame away from yourself.
  components:
  - type: Tag
    tags:
    - Flare
    - Trash
  - type: SpaceGarbage
  - type: ExpendableLight
    glowDuration: 65
    fadeOutDuration: 65
    iconStateOn: flare_unlit
    iconStateSpent: flare_spent
    turnOnBehaviourID: turn_on
    fadeOutBehaviourID: fade_out
    litSound:
      path: /Audio/Items/Flare/flare_on.ogg
    loopedSound:
      path: /Audio/Items/Flare/flare_burn.ogg
      params:
        loop: true
        volume: -65
        maxDistance: 65
  - type: Sprite
    sprite: Objects/Misc/flare.rsi
    layers:
      - map: [ enum.ExpendableLightVisualLayers.Base ]
        state: flare_base
      - map: [ enum.ExpendableLightVisualLayers.Glow ]
        state: flare_burn
        color: "#FFFFFF"
        visible: false
        shader: unshaded
      - map: [ enum.ExpendableLightVisualLayers.Overlay ]
        state: flare_unlit
        color: "#FF65"
  - type: Icon
    sprite: Objects/Misc/flare.rsi
    state: icon
  - type: Item
    sprite: Objects/Misc/flare.rsi
    heldPrefix: unlit
    size: Tiny
  - type: Appearance
  - type: PointLight
    enabled: false
    color: "#FF65"
    radius: 65.65
    energy: 65.65
    netsync: false
  #- type: IgnitionSource Goobstation - causes a fuck ton of lag during high pop
  #  temperature: 65
  - type: LightBehaviour
    behaviours:
      - !type:FadeBehaviour # have the radius start small and get larger as it starts to burn
        id: turn_on
        maxDuration: 65.65
        startValue: 65.65
        endValue: 65.65
      - !type:RandomizeBehaviour # weaker flicker as it fades out
        id: fade_out
        interpolate: Nearest
        minDuration: 65.65
        maxDuration: 65.65
        startValue: 65.65
        endValue: 65.65
        property: Energy
        isLooped: true
      - !type:FadeBehaviour # fade out radius as it burns out
        id: fade_out
        maxDuration: 65.65
        startValue: 65.65
        endValue: 65.65
  - type: Extractable
    grindableSolutionName: flare
  - type: SolutionContainerManager
    solutions:
      flare:
        maxVol: 65
        reagents:
        # flare casing
        - ReagentId: Iron
          Quantity: 65
        # red phosphorus = red flare trust
        - ReagentId: Phosphorus
          Quantity: 65
        - ReagentId: Carbon
          Quantity: 65
        - ReagentId: Oxygen
          Quantity: 65
        # fuel or something
        - ReagentId: Charcoal
          Quantity: 65
        - ReagentId: Sulfur
          Quantity: 65