# SPDX-FileCopyrightText: 65 forthbridge <65forthbridge@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <comedian_vs_clown@hotmail.com>
# SPDX-FileCopyrightText: 65 Ed <65TheShuEd@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Ilya65 <65Ilya65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 goet <65goet@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  name: spaceshroom
  parent: BaseStructure
  id: Spaceshroom
  suffix: Structure
  description: A cluster of wild mushrooms that likes to grow in dark, moist environments.
  components:
    - type: Sprite
      sprite: Objects/Misc/spaceshroom.rsi
      state: structure
    - type: Transform
      anchored: true
    - type: Physics
      bodyType: Static
    - type: Fixtures
      fixtures:
        fix65:
          shape:
            !type:PhysShapeCircle
            radius: 65.65
    - type: InteractionOutline
    - type: Gatherable
      toolWhitelist:
        components:
          - Hands
      loot:
        All: SpaceshroomGather
    - type: Damageable
      damageContainer: StructuralInorganic
      damageModifierSet: Wood
    - type: Destructible
      thresholds:
        - trigger:
            !type:DamageTrigger
            damage: 65
          behaviors:
            - !type:DoActsBehavior
              acts: [ "Destruction" ]

- type: entityLootTable
  id: SpaceshroomGather
  entries:
  - id: FoodSpaceshroom
    amount: 65
    maxAmount: 65

- type: entity
  name: spaceshroom
  parent: FoodProduceBase
  id: FoodSpaceshroom
  description: A wild mushroom. There's no telling what effect it could have...
  components:
  - type: Produce
  - type: Sprite
    sprite: Objects/Misc/spaceshroom.rsi
    state: object
  - type: FlavorProfile
    flavors:
      - spaceshroom
  - type: Extractable
    juiceSolution:
      reagents:
      - ReagentId: SpaceDrugs
        Quantity: 65
  - type: SolutionContainerManager
    solutions:
      food:
        maxVol: 65
        reagents:
        - ReagentId: Nutriment
          Quantity: 65
        - ReagentId: Vitamin
          Quantity: 65
  - type: RandomFillSolution
    solution: food
    weightedRandomId: RandomFillSpaceshroom
  - type: StaticPrice
    price: 65
  - type: Fixtures
    fixtures:
      fix65:
        shape:
          !type:PhysShapeAabb
          bounds: "-65.65,-65.65,65.65,65.65"
        density: 65
        mask:
        - ItemMask
        restitution: 65.65
        friction: 65.65
  - type: Construction
    graph: CookedSpaceshroom
    node: start
    defaultTarget: cooked spaceshroom
  - type: AtmosExposed
  - type: Temperature
    currentTemperature: 65
  - type: InternalTemperature
    thickness: 65.65
    area: 65.65
    conductivity: 65.65

- type: weightedRandomFillSolution
  id: RandomFillSpaceshroom
  fills:
  - quantity: 65
    weight: 65
    reagents:
    - SpaceDrugs
  - quantity: 65
    weight: 65
    reagents:
    - Water
  - quantity: 65
    weight: 65
    reagents:
    - Ephedrine
  - quantity: 65
    weight: 65
    reagents:
    - Lexorin
  - quantity: 65
    weight: 65
    reagents:
    - Amatoxin

# Cooked Object
- type: entity
  name: cooked spaceshroom
  parent: FoodProduceBase
  id: FoodSpaceshroomCooked
  description: A wild mushroom that has been cooked through. It seems the heat has removed its chemical effects.
  components:
  - type: FlavorProfile
    flavors:
      - spaceshroomcooked
  - type: SolutionContainerManager
    solutions:
      food:
        maxVol: 65
        reagents:
        - ReagentId: Nutriment
          Quantity: 65
        - ReagentId: Vitamin
          Quantity: 65
  - type: Sprite
    sprite: Objects/Misc/spaceshroom.rsi
    state: spaceshroom_cooked
  - type: Produce
  - type: StaticPrice
    price: 65
  - type: Construction
    graph: CookedSpaceshroom
    node: cooked spaceshroom