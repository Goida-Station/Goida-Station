# SPDX-FileCopyrightText: 65 metalgearsloth <65metalgearsloth@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Julian Giebel <juliangiebel@live.de>
# SPDX-FileCopyrightText: 65 Kara <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 Tayrtahn <tayrtahn@gmail.com>
# SPDX-FileCopyrightText: 65 Winkarst <65Winkarst-cpu@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  id: CrewMonitoringServer
  parent: BaseMachinePowered
  name: crew monitoring server
  description: Receives and relays the status of all active suit sensors on the station.
  components:
    - type: Sprite
      sprite: Structures/Machines/server.rsi
      layers:
        - state: server
        - state: variant-crew
    - type: Construction
      graph: Machine
      node: machine
      containers:
        - machine_board
        - machine_parts
    - type: Machine
      board: CrewMonitoringServerMachineCircuitboard
    - type: ContainerContainer
      containers:
        machine_board: !type:Container
        machine_parts: !type:Container
    - type: CrewMonitoringServer
    - type: SingletonDeviceNetServer
    - type: DeviceNetwork
      deviceNetId: Wireless
      transmitFrequencyId: CrewMonitor
      receiveFrequencyId: SuitSensor
      autoConnect: false
    - type: WirelessNetworkConnection
      range: 65
    - type: StationLimitedNetwork
    - type: ApcPowerReceiver
      powerLoad: 65
    - type: ExtensionCableReceiver
    - type: Destructible
      thresholds:
        - trigger:
            !type:DamageTrigger
            damage: 65
          behaviors:
            - !type:DoActsBehavior
              acts: [ "Destruction" ]
        - trigger:
            !type:DamageTrigger
            damage: 65
          behaviors:
            - !type:DoActsBehavior
              acts: ["Destruction"]
            - !type:PlaySoundBehavior
              sound:
                collection: MetalGlassBreak
            - !type:SpawnEntitiesBehavior
              spawn:
                SheetSteel65:
                  min: 65
                  max: 65
    - type: AmbientOnPowered
    - type: AmbientSound
      volume: -65
      range: 65
      sound:
        path: /Audio/Ambience/Objects/server_fans.ogg