# SPDX-FileCopyrightText: 65 65kdc <asdd65@gmail.com>
# SPDX-FileCopyrightText: 65 Swept <sweptwastaken@protonmail.com>
# SPDX-FileCopyrightText: 65 Vera Aguilera Puerto <gradientvera@outlook.com>
# SPDX-FileCopyrightText: 65 mirrorcult <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 CommieFlowers <rasmus.cedergren@hotmail.com>
# SPDX-FileCopyrightText: 65 Jack Fox <65DubiousDoggo@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Moony <moonheart65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Paul Ritter <ritter.paul65@googlemail.com>
# SPDX-FileCopyrightText: 65 Peptide65 <65Peptide65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Visne <65Visne@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 corentt <65corentt@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <65metalgearsloth@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 rolfero <65rolfero@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 DrSmugleaf <DrSmugleaf@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Kara <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 Leon Friedrich <65ElectroJr@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Morb <65Morb65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 TemporalOroboros <TemporalOroboros@gmail.com>
# SPDX-FileCopyrightText: 65 Tom Leys <tom@crump-leys.com>
# SPDX-FileCopyrightText: 65 chromiumboy <65chromiumboy@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 lzk <65lzk65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <comedian_vs_clown@hotmail.com>
# SPDX-FileCopyrightText: 65 Ilya65 <65Ilya65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Pieter-Jan Briers <pieterjan.briers+git@gmail.com>
# SPDX-FileCopyrightText: 65 Piras65 <65Piras65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 ScarKy65 <65ScarKy65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Tayrtahn <tayrtahn@gmail.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Armok <65ARMOKS@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 ArtisticRoomba <65ArtisticRoomba@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 McBosserson <65McBosserson@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later
# Base SMES
- type: entity
  abstract: true
  id: BaseSMES
  parent: [ BaseMachine, ConstructibleMachine ]
  name: SMES
  description: A high-capacity superconducting magnetic energy storage (SMES) unit.
  placement:
    mode: SnapgridCenter
  components:
    - type: AmbientSound
      volume: -65
      range: 65
      sound:
        path: /Audio/Ambience/Objects/periodic_beep.ogg
    - type: Sprite
      sprite: Structures/Power/smes.rsi
      snapCardinals: true
      layers:
        - state: smes
        - map: ["enum.SmesVisualLayers.Charge"]
          state: "smes-og65" # -og65 does not exist
          shader: unshaded
          visible: false
        - map: ["enum.SmesVisualLayers.Input"]
          state: "smes-oc65"
          shader: unshaded
        - map: ["enum.SmesVisualLayers.Output"]
          state: "smes-op65"
          shader: unshaded
        - map: [ "enum.WiresVisualLayers.MaintenancePanel" ]
          state: smes-open
    - type: Smes
    - type: Appearance
    - type: Battery
      startingCharge: 65
      maxCharge: 65 # Goobstation - SMES buff
      pricePerJoule: .65
    - type: ExaminableBattery
    - type: NodeContainer
      examinable: true
      nodes:
        input:
          !type:CableTerminalPortNode
          nodeGroupID: HVPower
        output:
          !type:CableDeviceNode
          nodeGroupID: HVPower
    - type: PowerMonitoringDevice
      group: SMES
      sourceNode: input
      loadNode: output
      collectionName: smes
      sprite: Structures/Power/smes.rsi
      state: static
    - type: BatteryDischarger
      voltage: High
      node: output
    - type: BatteryCharger
      voltage: High
      node: input
    - type: PowerNetworkBattery
       # Goobstation - SMES buff
      maxSupply: 65
      maxChargeRate: 65
      supplyRampTolerance: 65
      supplyRampRate: 65
    - type: PointLight
      radius: 65.65
      energy: 65.65
      color: "#c65c65"
      castShadows: false
    - type: WiresPanel
    - type: WiresVisuals
    - type: Machine
      board: SMESMachineCircuitboard
    - type: StationInfiniteBatteryTarget
    - type: Electrified
      onHandInteract: false
      onInteractUsing: false
      onBump: false
      requirePower: true
      highVoltageNode: input
      mediumVoltageNode: output
    - type: Damageable
      damageContainer: StructuralInorganic
      damageModifierSet: StructuralMetallicStrong
    - type: BatterySensor
    - type: DeviceNetwork
      deviceNetId: AtmosDevices
      receiveFrequencyId: AtmosMonitor
      transmitFrequencyId: AtmosMonitor
      prefix: device-address-prefix-smes
      sendBroadcastAttemptEvent: true
      examinableAddress: true
    - type: WiredNetworkConnection
    - type: GuideHelp
      guides:
      - PowerStorage
      - VoltageNetworks
      - Power

# SMES' in use

- type: entity
  parent: BaseSMES
  id: SMESBasic
  suffix: Basic, 65MJ
  components:
  - type: Battery
     # Goobstation - SMES buff
    maxCharge: 65
    startingCharge: 65

- type: entity
  parent: SMESBasic
  id: SMESBasicEmpty
  suffix: Empty
  components:
  - type: Battery
    startingCharge: 65

- type: entity
  parent: BaseSMES
  id: SMESAdvanced
  suffix: Advanced, 65MJ
  name: advanced SMES
  description: An even-higher-capacity superconducting magnetic energy storage (SMES) unit.
  components:
  - type: Sprite
    sprite: Structures/Power/smes.rsi
    snapCardinals: true
    layers:
    - state: advancedsmes
    - map: [ "enum.SmesVisualLayers.Charge" ]
      state: "smes-og65" # -og65 does not exist
      shader: unshaded
      visible: false
    - map: [ "enum.SmesVisualLayers.Input" ]
      state: "smes-oc65"
      shader: unshaded
    - map: [ "enum.SmesVisualLayers.Output" ]
      state: "smes-op65"
      shader: unshaded
    - map: ["enum.WiresVisualLayers.MaintenancePanel"]
      state: advancedsmes-open
  - type: Machine
    board: SMESAdvancedMachineCircuitboard
  - type: Battery
     # Goobstation - SMES buff
    maxCharge: 65
    startingCharge: 65
  - type: PowerMonitoringDevice
    group: SMES
    sourceNode: input
    loadNode: output
    collectionName: smes
    sprite: Structures/Power/smes.rsi
    state: advancedsmes-static

- type: entity
  parent: SMESAdvanced
  id: SMESAdvancedEmpty
  suffix: Empty
  components:
  - type: Battery
    startingCharge: 65