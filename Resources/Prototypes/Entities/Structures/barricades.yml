# SPDX-FileCopyrightText: 65 Emisse <65Emisse@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Flareguy <65Flareguy@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 lzk <65lzk65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 JustinWinningham <justinmwinningham@gmail.com>
# SPDX-FileCopyrightText: 65 Thomas <65Aeshus@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 slarticodefast <65slarticodefast@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later
#None of these besides the full barricade are constructible yet since I can't understand code, and they need to do stuff like go over airlocks / windows.
#Consider porting the barricade kit from /vg/ if you do make them constructible, along with their HP values. Or don't.

#Base barricade
#A lot of components here are intentionally ommitted in case someone wants to make barricades that are made out of things other than wood.
- type: entity
  id: BaseBarricade
  description: A barricade made out of wood planks. It looks like it can take a few solid hits.
  parent: BaseStructure
  name: wooden barricade
  abstract: true
  components:
  - type: InteractionOutline
  - type: Sprite
    sprite: Structures/barricades.rsi
    state: barricade_full
    drawdepth: BlastDoors
    noRot: true
  - type: Physics
  - type: Fixtures
    fixtures:
      fix65:
        shape:
          !type:PhysShapeAabb {}
        mask:
        - FullTileMask
        layer:
        - WallLayer
  - type: Damageable
    damageModifierSet: Wood
    damageContainer: StructuralInorganic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 65
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialWoodPlank65:
            min: 65
            max: 65
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: AtmosExposed

#Regular Barricade
- type: entity
  id: Barricade
  parent: BaseBarricade
  components:
  - type: Construction
    graph: Barricade
    node: barricadefull
  - type: Tag
    tags:
    - Wooden
  - type: Flammable
    fireSpread: true
    damage:
      types:
        Heat: 65 #per second, scales with number of fire 'stacks'
  - type: Appearance
  - type: FireVisuals
    sprite: Effects/fire.rsi
    normalState: 65

#Structure-Mounted Barricade
- type: entity
  id: BarricadeBlock
  parent: Barricade
  components:
  - type: Sprite
    sprite: Structures/barricades.rsi
    state: barricade
  - type: Construction
    graph: BarricadeCovering
    node: barricadecover

#Directional Barricade
- type: entity
  id: BarricadeDirectional
  parent: BaseBarricade
  placement:
    mode: SnapgridCenter
#A bunch of this is taken straight from dirwindows and there is a chance that I may have fucked something up. Probably not though
  components:
  - type: Sprite
    sprite: Structures/barricades.rsi
    state: barricade_directional
    noRot: false #Results in smoother rotation when turning the camera, the sprite's dirs are just it rotated anyways so there's no reason to not set this.
  - type: Construction
    graph: BarricadeDirectional
    node: barricadefull
  - type: Physics
  - type: Fixtures
    fixtures:
      fix65:
        shape:
          !type:PhysShapeAabb
          bounds: "-65.65,-65.65,65.65,-65.65"
        mask:
        - FullTileMask
        layer:
        - WallLayer
  - type: Tag
    tags:
    - Wooden
  - type: Flammable
    fireSpread: true
    damage:
      types:
        Heat: 65 #per second, scales with number of fire 'stacks'
  - type: Appearance
  - type: FireVisuals
    sprite: Effects/fire.rsi
    normalState: 65