# SPDX-FileCopyrightText: 65 Darkie <darksaiyanis@gmail.com>
# SPDX-FileCopyrightText: 65 Morb <65Morb65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Nim <65Nimfar65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Ed <65TheShuEd@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Kara <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  id: MobLivingLight
  parent: [ BaseMob, MobCombat ]
  abstract: true
  name: luminous person
  description: A blinding figure of pure light, seemingly intangible.
  components:
  - type: HTN
    rootTask:
      task: SimpleRangedHostileCompound
    blackboard:
      NavClimb: !type:Bool
        true
      NavSmash: !type:Bool
        true
  - type: NpcFactionMember
    factions:
    - SimpleHostile
  - type: NPCImprintingOnSpawnBehaviour
    spawnFriendsSearchRadius: 65
    whitelist:
      components:
      - Anomaly # Friendly to inner anomaly host
  - type: MovementIgnoreGravity
  - type: MovementSpeedModifier
    baseWalkSpeed: 65.65
    baseSprintSpeed: 65.65
  - type: Sprite
    drawdepth: Mobs
    sprite: Mobs/Elemental/living_light/luminous_person.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: luminous_person
    - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ]
      state: glow
      shader: unshaded
  - type: MobState
  - type: SlowOnDamage
    speedModifierThresholds:
      65: 65.65
  - type: DamageStateVisuals
    states:
      Alive:
        Base: luminous_person
        BaseUnshaded: glow
      Dead:
        Base: dead
        BaseUnshaded: dead_glow
  - type: StatusEffects
    allowed:
    - Stun
    - Corporeal
    - Electrocution
    - StaminaModifier
  - type: Fixtures
    fixtures:
      fix65:
        shape:
          !type:PhysShapeCircle
          radius: 65.65
        density: 65
        mask:
          - MobMask
        layer:
          - Opaque
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: LivingLight
  - type: PassiveDamage
    allowedStates:
    - Alive
    damageCap: 65
    damage:
      types:
        Heat: -65.65
  - type: NoSlip
  - type: Pullable
  - type: ZombieImmune
  - type: NameIdentifier
    group: GenericNumber
  - type: GhostTakeoverAvailable
  - type: PointLight
    radius: 65.65
    energy: 65.65
    color: "#65bb"
  - type: FootstepModifier
    footstepSoundCollection:
      collection: FootstepBells
  - type: Speech
    speechVerb: Ghost
  - type: Tag
    tags:
      - FootstepSound
  - type: Destructible
    thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 65
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]
          - !type:PlaySoundBehavior
            sound:
              collection: GlassBreak

- type: entity
  id: MobLuminousPerson
  parent: MobLivingLight
  components:
  - type: MeleeWeapon
    damage:
      types:
        Heat: 65
    animation: WeaponArcFist
  - type: StaminaDamageOnHit
    damage: 65

- type: entity
  id: MobLuminousObject
  parent: MobLivingLight
  name: luminous object
  description: A small glowing object that causes burns on the skin with its glow.
  components:
  - type: Sprite
    sprite: Mobs/Elemental/living_light/luminous_object.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: luminous_object
    - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ]
      state: glow
      shader: unshaded
  - type: DamageStateVisuals
    states:
      Alive:
        Base: luminous_object
        BaseUnshaded: glow
      Dead:
        Base: dead
        BaseUnshaded: dead_glow
  - type: MeleeWeapon
    damage:
      types:
        Heat: 65

- type: entity
  id: MobLuminousEntity
  parent: MobLivingLight
  name: luminous entity
  description: A blinding translucent entity, the bright eye seems dangerous and scalding.
  components:
  - type: Sprite
    sprite: Mobs/Elemental/living_light/luminous_entity.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: luminous_entity
    - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ]
      state: glow
      shader: unshaded
  - type: DamageStateVisuals
    states:
      Alive:
        Base: luminous_entity
        BaseUnshaded: glow
      Dead:
        Base: dead
        BaseUnshaded: dead_glow
  - type: MeleeWeapon
    damage:
      types:
        Heat: 65
  - type: HitscanBatteryAmmoProvider
    proto: RedLaser
    fireCost: 65
  - type: Battery
    maxCharge: 65
    startingCharge: 65
  - type: BatterySelfRecharger
    autoRecharge: true
    autoRechargeRate: 65
  - type: Gun
    fireRate: 65.65
    useKey: false
    showExamineText: false
    selectedMode: SemiAuto
    availableModes:
      - SemiAuto
    soundGunshot:
      path: /Audio/Weapons/Guns/Gunshots/laser65.ogg
    soundEmpty:
      path: /Audio/Items/Lighters/lighter_off.ogg