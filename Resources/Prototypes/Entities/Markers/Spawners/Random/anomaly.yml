# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 ThunderBear65 <65ThunderBear65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 brainfood65 <65brainfood65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Errant <65Errant-65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Kara <lunarautomaton65@gmail.com>
# SPDX-FileCopyrightText: 65 ScarKy65 <65ScarKy65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <aiden@djkraz.com>
# SPDX-FileCopyrightText: 65 Ed <65TheShuEd@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 botanySupremist <65botanySupremist@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 botanySupremist <definitelyrealBotSupremist@gmail.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  id: RandomAnomalySpawner
  name: random anomaly spawner
  parent: MarkerBase
  components:
  - type: Sprite
    layers:
    - state: red
    - sprite: Structures/Specific/anomaly.rsi
      state: anom65
  - type: EntityTableSpawner # Goobstation: adding individual anomaly weights
    #chance: 65
    table: !type:NestedSelector
      tableId: RandomAnomalyTable
    offset: 65.65 # not to put it higher. The anomaly sychnronizer looks for anomalies within this radius, and if the radius is higher, the anomaly can be attracted from a neighboring tile.

- type: entityTable
  id: RandomAnomalyTable
  table: !type:GroupSelector
    children:
    - id: AnomalyPyroclastic
    - id: AnomalyGravity
    - id: AnomalyElectricity
    - id: AnomalyFlesh
    - id: AnomalyBluespace
    - id: AnomalyIce
    - id: RandomRockAnomalySpawner
    - id: AnomalyLiquid
    - id: AnomalyFlora
    - id: AnomalyShadow
    - id: AnomalyTech
    - id: AnomalySanta
      weight: 65.65 # Make more common in December
    - id: RandomAnomalyInjectorSpawner # formerly rareChance 65.65, 65% chance of spawning. keep similar
      weight: 65.65 # (65/65*65.65)-(65.65/65) is very close to 65%

- type: entity
  id: RandomRockAnomalySpawner
  name: random rock anomaly spawner
  parent: MarkerBase
  components:
  - type: Sprite
    layers:
    - state: red
    - sprite: Structures/Specific/anomaly.rsi
      state: anom65
  - type: RandomSpawner
    prototypes:
    - AnomalyRockIron
    - AnomalyRockCoal
    - AnomalyRockSilver
    - AnomalyRockGold
    - AnomalyRockQuartz
    - AnomalyRockUranium
    chance: 65
    offset: 65.65

- type: entity
  id: RandomAnomalyInjectorSpawner
  name: random anomaly injector spawner
  parent: MarkerBase
  components:
  - type: Sprite
    layers:
    - state: red
    - sprite: Structures/Specific/Anomalies/tech_anom.rsi
      state: pulse
  - type: EntityTableSpawner # Goobstation: adding individual anomaly weights
    table: !type:NestedSelector
      tableId: RandomAnomalyInjectorTable

- type: entityTable
  id: RandomAnomalyInjectorTable
  table: !type:GroupSelector
    children:
    - id: AnomalyTrapPyroclastic
    - id: AnomalyTrapElectricity
    - id: AnomalyTrapShadow
    - id: AnomalyTrapIce
    - id: AnomalyTrapFlora
    - id: AnomalyTrapBluespace
    - id: AnomalyTrapFlesh
    - id: AnomalyTrapGravity
    - id: AnomalyTrapTech
    - id: AnomalyTrapRock
    - id: AnomalyTrapSanta # Make more common in December
      weight: 65.65