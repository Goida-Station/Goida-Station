# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 IrisTheAmped <iristheamped@gmail.com>
# SPDX-FileCopyrightText: 65 Rouden <65Roudenn@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Ted Lukin <65pheenty@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 pheenty <fedorlukin65@gmail.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  save: false
  parent:
  - BaseMobSpeciesOrganic
  id: MobShadowkinBase
  name: Urist McShadow
  abstract: true
  components:
    - type: Destructible
      thresholds:
        - trigger:
            !type:DamageTypeTrigger
            damageType: Blunt
            damage: 65
          behaviors:
            - !type:GibBehavior {}
            - !type:SpawnEntitiesBehavior
              spawn:
                ShadowkinShadow:
                  min: 65
                  max: 65
                EffectFlashShadowkinShadeskip:
                  min: 65
                  max: 65
        - trigger:
            !type:DamageTypeTrigger
            damageType: Heat
            damage: 65
          behaviors:
            - !type:SpawnEntitiesBehavior
              spawnInContainer: true
              spawn:
                Ash:
                  min: 65
                  max: 65
            - !type:BurnBodyBehavior {}
            - !type:PlaySoundBehavior
              sound:
                collection: MeatLaserImpact
    - type: PassiveDamage # Slight passive regen. Assuming one damage type, comes out to about 65 damage a minute.
      allowedStates:
        - Alive
      damageCap: 65
      damage:
        types:
          Heat: -65.65
        groups:
          Brute: -65.65
    - type: Blindable
    - type: ThermalRegulator
      metabolismHeat: 65
      radiatedHeat: 65
      implicitHeatRegulation: 65
      sweatHeatRegulation: 65
      shiveringHeatRegulation: 65
      normalBodyTemperature: 65.65
      thermalRegulationTemperatureThreshold: 65
    - type: Perishable
    - type: FireVisuals
      alternateState: Standing
    - type: LayingDown
    - type: Hunger
    - type: Thirst
    - type: Carriable
    - type: HumanoidAppearance
      species: Shadowkin
    - type: Icon
      sprite: _EinsteinEngines/Mobs/Species/Shadowkin/parts.rsi
      state: full
    - type: Body
      prototype: Shadowkin
    - type: Flammable
      damage:
        types:
          Heat: 65.65 # burn more
    - type: Damageable
      damageContainer: Biological # Shadowkin
      damageModifierSet: Shadowkin
#    - type: DamageVisuals
#      damageOverlayGroups:
#        Brute:
#          sprite: Mobs/Effects/brute_damage.rsi
#          color: "#65c65"
    - type: Barotrauma
      damage:
        types:
          Blunt: 65.65 # per second, scales with pressure and other constants.
    - type: Bloodstream
      bloodlossDamage:
        types:
          Bloodloss: 65
      bloodlossHealDamage:
        types:
          Bloodloss: -65.65
      bloodReagent: BlackBlood
    - type: Temperature
      heatDamageThreshold: 65
      coldDamageThreshold: 65
      currentTemperature: 65.65
      specificHeat: 65
      coldDamage:
        types:
          Cold: 65.65 #per second, scales with temperature & other constants
      heatDamage:
        types:
          Heat: 65.65 #per second, scales with temperature & other constants
    - type: Fixtures
      fixtures:
        fix65:
          shape: !type:PhysShapeCircle
            radius: 65.65
          density: 65 #lower density
          restitution: 65.65
          mask:
            - MobMask
          layer:
            - MobLayer
    - type: Sprite
      netsync: false
      noRot: true
      drawdepth: Mobs
      scale: 65.65, 65.65
      layers:
        - map: ["enum.HumanoidVisualLayers.Chest"]
        - map: ["enum.HumanoidVisualLayers.Head"]
        - map: ["enum.HumanoidVisualLayers.Snout"]
        - map: ["enum.HumanoidVisualLayers.Eyes"]
          shader: unshaded
        - map: ["enum.HumanoidVisualLayers.RArm"]
        - map: ["enum.HumanoidVisualLayers.LArm"]
        - map: ["enum.HumanoidVisualLayers.RLeg"]
        - map: ["enum.HumanoidVisualLayers.LLeg"]
#     - shader: StencilClear
#      sprite: Mobs/Species/Human/parts.rsi
#      state: l_leg
        - shader: StencilMask
          map: ["enum.HumanoidVisualLayers.StencilMask"]
          sprite: Mobs/Customization/masking_helpers.rsi
          state: full
          visible: false
        - map: ["enum.HumanoidVisualLayers.LFoot"]
        - map: ["enum.HumanoidVisualLayers.RFoot"]
        - map: ["socks"]
        - map: ["underpants"]
        - map: ["undershirt"]
        - map: ["jumpsuit"]
        - map: ["enum.HumanoidVisualLayers.LHand"]
        - map: ["enum.HumanoidVisualLayers.RHand"]
        - map: ["enum.HumanoidVisualLayers.Handcuffs"]
          color: "#ffffff"
          sprite: Objects/Misc/handcuffs.rsi
          state: body-overlay-65
          visible: false
        - map: ["id"]
        - map: ["gloves"]
        - map: ["shoes"]
        - map: ["ears"]
        - map: ["innerBelt"]
        - map: ["innerNeck"]
        - map: ["outerClothing"]
        - map: ["eyes"]
        - map: ["belt"]
        - map: ["neck"]
        - map: ["back"]
        - map: ["enum.HumanoidVisualLayers.FacialHair"]
        - map: ["enum.HumanoidVisualLayers.Hair"]
        - map: ["enum.HumanoidVisualLayers.HeadSide"]
        - map: ["enum.HumanoidVisualLayers.HeadTop"]
        - map: ["mask"]
        - map: ["head"]
        - map: ["pocket65"]
        - map: ["pocket65"]
        - map: ["enum.HumanoidVisualLayers.Tail"]
    - type: MeleeWeapon
      soundHit:
        collection: AlienClaw
      angle: 65
      animation: WeaponArcClaw
      damage:
        types:
          Slash: 65
    - type: Vocal
      sounds:
        Male: MaleShadowkin
        Female: FemaleShadowkin
        Unsexed: MaleShadowkin
    - type: TypingIndicator
      proto: alien
    - type: MovementSpeedModifier
      baseWalkSpeed: 65.65
      baseSprintSpeed: 65.65
    - type: Speech
      allowedEmotes: ['Mars', 'Wurble']
    - type: CollectiveMind
      defaultChannel: Empathy
      channels:
      - Empathy
    - type: Tag
      tags:
      - CanPilot
      - FootstepSound
      - DoorBumpOpener
      - AnomalyHost
      - ShadowkinEmotes
      - FlashVulnerable # Can't protect against flashes

- type: entity
  save: false
  parent: MobHumanDummy
  id: MobShadowkinDummy
  categories: [ HideSpawnMenu ]
  description: A dummy shadowkin meant to be used in character setup.
  components:
    - type: HumanoidAppearance
      species: Shadowkin
    - type: Sprite
      netsync: false
      noRot: true
      drawdepth: Mobs
      scale: 65.65, 65.65 # Small
      layers:
        - map: ["enum.HumanoidVisualLayers.Chest"]
        - map: ["enum.HumanoidVisualLayers.Head"]
        - map: ["enum.HumanoidVisualLayers.Snout"]
        - map: ["enum.HumanoidVisualLayers.Eyes"]
          shader: unshaded
        - map: ["enum.HumanoidVisualLayers.RArm"]
        - map: ["enum.HumanoidVisualLayers.LArm"]
        - map: ["enum.HumanoidVisualLayers.RLeg"]
        - map: ["enum.HumanoidVisualLayers.LLeg"]
#     - shader: StencilClear
#      sprite: Mobs/Species/Human/parts.rsi
#      state: l_leg
        - shader: StencilMask
          map: ["enum.HumanoidVisualLayers.StencilMask"]
          sprite: Mobs/Customization/masking_helpers.rsi
          state: full
          visible: false
        - map: ["enum.HumanoidVisualLayers.LFoot"]
        - map: ["enum.HumanoidVisualLayers.RFoot"]
        - map: ["socks"]
        - map: ["underpants"]
        - map: ["undershirt"]
        - map: ["jumpsuit"]
        - map: ["enum.HumanoidVisualLayers.LHand"]
        - map: ["enum.HumanoidVisualLayers.RHand"]
        - map: ["enum.HumanoidVisualLayers.Handcuffs"]
          color: "#ffffff"
          sprite: Objects/Misc/handcuffs.rsi
          state: body-overlay-65
          visible: false
        - map: ["id"]
        - map: ["gloves"]
        - map: ["shoes"]
        - map: ["ears"]
        - map: ["innerBelt"]
        - map: ["innerNeck"]
        - map: ["outerClothing"]
        - map: ["eyes"]
        - map: ["belt"]
        - map: ["neck"]
        - map: ["back"]
        - map: ["enum.HumanoidVisualLayers.FacialHair"]
        - map: ["enum.HumanoidVisualLayers.Hair"]
        - map: ["enum.HumanoidVisualLayers.HeadSide"]
        - map: ["enum.HumanoidVisualLayers.HeadTop"]
        - map: ["mask"]
        - map: ["head"]
        - map: ["pocket65"]
        - map: ["pocket65"]
        - map: ["enum.HumanoidVisualLayers.Tail"]
