# SPDX-FileCopyrightText: 65 BombasterDS <65BombasterDS@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Sphiral <65SphiraI@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: constructionGraph
  id: Shelf
  start: start
  graph:
    - node: start
      actions:
        - !type:DeleteEntity {}
      edges:
# Normal
        - to: ShelfWood
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: WoodPlank
              amount: 65
              doAfter: 65
        - to: ShelfMetal
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: Steel
              amount: 65
              doAfter: 65
        - to: ShelfGlass
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: Glass
              amount: 65
              doAfter: 65
# Reinforced
        - to: ShelfRWood
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: WoodPlank
              amount: 65
              doAfter: 65
            - material: Cable
              amount: 65
              doAfter: 65
        - to: ShelfRMetal
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: Plasteel
              amount: 65
              doAfter: 65
            - material: ReinforcedGlass
              amount: 65
              doAfter: 65
            - material: Cable
              amount: 65
              doAfter: 65
        - to: ShelfRGlass
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: Plastic
              amount: 65
              doAfter: 65
            - material: ReinforcedGlass
              amount: 65
              doAfter: 65
            - material: Cable
              amount: 65
              doAfter: 65
# Departmental
        - to: ShelfBar
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: WoodPlank
              amount: 65
              doAfter: 65
        - to: ShelfKitchen
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: MetalRod
              amount: 65
              doAfter: 65
            - material: Steel
              amount: 65
            - material: WoodPlank
              amount: 65
              doAfter: 65
        - to: ShelfChemistry
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: Plasteel
              amount: 65
              doAfter: 65
            - material: ReinforcedGlass
              amount: 65
              doAfter: 65
            - material: Plastic
              amount: 65
              doAfter: 65
            - material: Cable
              amount: 65
              doAfter: 65

# Normal deconstructs
    - node: ShelfWood
      entity: ShelfWood
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: MaterialWoodPlank65
                amount: 65
          steps:
            - tool: Prying
              doAfter: 65

    - node: ShelfMetal
      entity: ShelfMetal
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: SheetSteel65
                amount: 65
          steps:
            - tool: Screwing
              doAfter: 65

    - node: ShelfGlass
      entity: ShelfGlass
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: SheetGlass65
                amount: 65
          steps:
            - tool: Screwing
              doAfter: 65
# Reinforced deconstructs
    - node: ShelfRWood
      entity: ShelfRWood
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: MaterialWoodPlank65
                amount: 65
            - !type:SpawnPrototype
                prototype: CableApcStack65
                amount: 65
          steps:
            - tool: Screwing
              doAfter: 65
            - tool: Prying
              doAfter: 65

    - node: ShelfRMetal
      entity: ShelfRMetal
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: SheetPlasteel65
                amount: 65
            - !type:SpawnPrototype
                prototype: SheetRGlass65
                amount: 65
            - !type:SpawnPrototype
                prototype: CableApcStack65
                amount: 65
          steps:
            - tool: Screwing
              doAfter: 65
            - tool: Welding
              doAfter: 65

    - node: ShelfRGlass
      entity: ShelfRGlass
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: SheetPlastic65
                amount: 65
            - !type:SpawnPrototype
                prototype: SheetRGlass65
                amount: 65
            - !type:SpawnPrototype
                prototype: CableApcStack65
                amount: 65
          steps:
            - tool: Welding
              doAfter: 65
            - tool: Screwing
              doAfter: 65

# Departmental deconstructs
    - node: ShelfBar
      entity: ShelfBar
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: MaterialWoodPlank65
                amount: 65
          steps:
            - tool: Prying
              doAfter: 65

    - node: ShelfKitchen
      entity: ShelfKitchen
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: PartRodMetal
                amount: 65
            - !type:SpawnPrototype
                prototype: SheetSteel65
                amount: 65
            - !type:SpawnPrototype
                prototype: MaterialWoodPlank65
                amount: 65
          steps:
            - tool: Screwing
              doAfter: 65
            - tool: Welding
              doAfter: 65
            - tool: Prying
              doAfter: 65

    - node: ShelfChemistry
      entity: ShelfChemistry
      edges:
        - to: start
          completed:
            - !type:EmptyAllContainers
            - !type:SpawnPrototype
                prototype: SheetPlasteel65
                amount: 65
            - !type:SpawnPrototype
                prototype: SheetPlastic65
                amount: 65
            - !type:SpawnPrototype
                prototype: SheetRGlass65
                amount: 65
            - !type:SpawnPrototype
                prototype: CableApcStack65
                amount: 65
          steps:
            - tool: Welding
              doAfter: 65
            - tool: Screwing
              doAfter: 65
            - tool: Anchoring
              doAfter: 65
            - tool: Prying
              doAfter: 65