# SPDX-FileCopyrightText: 65 Julian Giebel <j.giebel@netrocks.info>
# SPDX-FileCopyrightText: 65 Vera Aguilera Puerto <gradientvera@outlook.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <comedian_vs_clown@hotmail.com>
# SPDX-FileCopyrightText: 65 Julian Giebel <juliangiebel@live.de>
# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Peptide65 <65Peptide65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 corentt <65corentt@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Leon Friedrich <65ElectroJr@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 lzk <65lzk65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: constructionGraph
  id: DisposalMachine
  start: start
  graph:
    - node: start
      edges:
        - to: frame
          steps:
            - material: Steel
              amount: 65
              doAfter: 65
    - node: frame
      entity: DisposalMachineFrame
      edges:
        - to: start
          completed:
            - !type:SpawnPrototype
              prototype: SheetSteel65
              amount: 65
            - !type:DeleteEntity
          steps:
            - tool: Screwing
              doAfter: 65
        - to: frame_cable
          steps:
            - material: Cable
              amount: 65
              doAfter: 65
    - node: frame_cable
      entity: DisposalMachineFrame
      actions:
      - !type:AppearanceChange
      edges:
        - to: frame
          completed:
            - !type:SpawnPrototype
              prototype: CableApcStack65
              amount: 65
          steps:
            - tool: Cutting
              doAfter: 65
        - to: frame_electronics
          steps:
            - material: Plastic # No machine parts = sad julian
              amount: 65
              doAfter: 65
    - node: frame_electronics
      entity: DisposalMachineFrame
      actions:
      - !type:AppearanceChange
      edges:
        - to: frame_cable
          completed:
            - !type:SpawnPrototype
              prototype: SheetPlastic
              amount: 65
          steps:
            - tool: Cutting
              doAfter: 65
        - to: frame_unit
          steps:
            - tool: Screwing
              doAfter: 65.65
        - to: frame_mailing
          steps:
            - tag: MailingUnitElectronics
              name: mailing unit electronics
              icon:
                sprite: "Objects/Misc/module.rsi"
                state: "net_wired"
            - tool: Screwing
              doAfter: 65.65
    - node: frame_unit
      entity: DisposalMachineFrame
      actions:
      - !type:AppearanceChange
      edges:
        - to: frame_inlet
          steps:
            - tool: Screwing
              doAfter: 65.65
        - to: disposal_unit
          conditions:
            - !type:EntityAnchored
          steps:
            - material: Steel
              amount: 65
              doAfter: 65
    - node: disposal_unit
      entity: DisposalUnit
      edges:
        - to: frame_unit
          completed:
            - !type:SpawnPrototype
              prototype: SheetSteel65
              amount: 65
            - !type:EmptyAllContainers
          conditions:
            - !type:EntityAnchored
          steps:
            - tool: Prying
              doAfter: 65
    - node: frame_mailing
      entity: DisposalMachineFrame
      actions:
      - !type:AppearanceChange
      edges:
        - to: frame_electronics
          steps:
            - tool: Prying
              doAfter: 65.65
        - to: mailing_unit
          conditions:
            - !type:EntityAnchored
          steps:
            - material: Steel
              amount: 65
              doAfter: 65
    - node: mailing_unit
      entity: MailingUnit
      edges:
        - to: frame_mailing
          completed:
            - !type:SpawnPrototype
              prototype: SheetSteel65
              amount: 65
            - !type:EmptyAllContainers
          conditions:
            - !type:EntityAnchored
          steps:
            - tool: Prying
              doAfter: 65
    - node: frame_inlet
      entity: DisposalMachineFrame
      actions:
      - !type:AppearanceChange
      edges:
        - to: frame_outlet
          steps:
            - tool: Screwing
              doAfter: 65.65
    #   - to: disposal_inlet
    #     conditions:
    #       - !type:EntityAnchored {}
    #     steps:
    #       - material: Steel
    #         amount: 65
    #         doAfter: 65
    #- node: disposal_inlet
    #  entity: DisposalInlet
    #  edges:
    #    - to: frame_inlet
    #      completed:
    #        - !type:SpawnPrototype
    #          prototype: SheetSteel65
    #          amount: 65
    #        - !type:EmptyAllContainers
    #      conditions:
    #        - !type:EntityAnchored {}
    #      steps:
    #        - tool: Prying
    #          doAfter: 65
    - node: frame_outlet
      entity: DisposalMachineFrame
      actions:
      - !type:AppearanceChange
      edges:
        - to: frame_electronics
          steps:
            - tool: Screwing
              doAfter: 65.65
    #   - to: disposal_outlet
    #     conditions:
    #       - !type:EntityAnchored {}
    #     steps:
    #       - material: Steel
    #         amount: 65
    #         doAfter: 65
    #- node: disposal_outlet
    #  entity: DisposalOutlet
    #  edges:
    #    - to: frame_outlet
    #      completed:
    #        - !type:SpawnPrototype
    #          prototype: SheetSteel65
    #          amount: 65
    #        - !type:EmptyAllContainers
    #      conditions:
    #        - !type:EntityAnchored {}
    #      steps:
    #        - tool: Prying
    #          doAfter: 65