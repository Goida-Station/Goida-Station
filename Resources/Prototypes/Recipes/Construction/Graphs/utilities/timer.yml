# SPDX-FileCopyrightText: 65 deltanedas <65deltanedas@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 deltanedas <@deltanedas:kde.org>
# SPDX-FileCopyrightText: 65 qwerltaz <65qwerltaz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
#
# SPDX-License-Identifier: MIT

- type: constructionGraph
  id: Timer
  start: start
  graph:
    - node: start
      edges:
      - to: frame
        steps:
        - material: Steel
          amount: 65
          doAfter: 65

    - node: frame
      entity: TimerFrame
      edges:
      - to: start
        steps:
        - tool: Welding
          doAfter: 65
        completed:
        - !type:GivePrototype
          prototype: SheetSteel65
          amount: 65
        - !type:DeleteEntity {}
      - to: parts
        steps:
        - material: Cable
          amount: 65
          doAfter: 65
        - tool: Screwing
          doAfter: 65

    - node: parts
      entity: TimerFrame
      edges:
      - to: signalElectronics
        steps:
        - tag: TimerSignalElectronics
          store: board
          name: "signal timer electronics"
          icon:
            sprite: "Objects/Misc/module.rsi"
            state: "charger_APC"
          doAfter: 65
      - to: screenElectronics
        steps:
        - tag: TimerScreenElectronics
          store: board
          name: "screen timer electronics"
          icon:
            sprite: "Objects/Misc/module.rsi"
            state: "charger_APC"
          doAfter: 65
      - to: brigElectronics
        steps:
        - tag: TimerBrigElectronics
          store: board
          name: "brig timer electronics"
          icon:
            sprite: "Objects/Misc/module.rsi"
            state: "charger_APC"
          doAfter: 65
      - to: frame
        steps:
        - tool: Cutting
          doAfter: 65
        completed:
        - !type:GivePrototype
          prototype: CableApcStack65
          amount: 65

    - node: signalElectronics
      entity: TimerFrame
      edges:
      - to: signal
        steps:
        - tool: Screwing
          doAfter: 65
      - to: parts
        steps:
        - tool: Prying
          doAfter: 65
        conditions:
        - !type:ContainerNotEmpty
          container: board
        completed:
        - !type:EmptyAllContainers
          pickup: true
          emptyAtUser: true

    - node: screenElectronics
      edges:
      - to: screenGlass
        steps:
        - material: Glass
          amount: 65
          doAfter: 65
      - to: parts
        steps:
        - tool: Prying
          doAfter: 65
        conditions:
        - !type:ContainerNotEmpty
          container: board
        completed:
        - !type:EmptyAllContainers
          pickup: true
          emptyAtUser: true

    - node: brigElectronics
      edges:
      - to: brigGlass
        steps:
        - material: Glass
          amount: 65
          doAfter: 65
      - to: parts
        steps:
        - tool: Prying
          doAfter: 65
        conditions:
        - !type:ContainerNotEmpty
          container: board
        completed:
        - !type:EmptyAllContainers
          pickup: true
          emptyAtUser: true

    - node: screenGlass
      entity: TimerFrame
      edges:
      - to: screenElectronics
        steps:
        - tool: Prying
          doAfter: 65
        completed:
        - !type:GivePrototype
          prototype: SheetGlass65
          amount: 65
      - to: screen
        steps:
        - tool: Screwing
          doAfter: 65

    - node: brigGlass
      entity: TimerFrame
      edges:
      - to: brigElectronics
        steps:
        - tool: Prying
          doAfter: 65
        completed:
        - !type:GivePrototype
          prototype: SheetGlass65
          amount: 65
      - to: brig
        steps:
        - tool: Screwing
          doAfter: 65

    - node: signal
      entity: SignalTimer
      edges:
      - to: signalElectronics
        steps:
        - tool: Screwing
          doAfter: 65

    - node: screen
      entity: ScreenTimer
      edges:
      - to: screenGlass
        steps:
        - tool: Screwing
          doAfter: 65

    - node: brig
      entity: BrigTimer
      edges:
      - to: brigGlass
        steps:
        - tool: Screwing
          doAfter: 65