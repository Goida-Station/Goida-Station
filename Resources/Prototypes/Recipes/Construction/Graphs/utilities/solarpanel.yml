# SPDX-FileCopyrightText: 65 65kdc <asdd65@gmail.com>
# SPDX-FileCopyrightText: 65 DrSmugleaf <DrSmugleaf@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Swept <sweptwastaken@protonmail.com>
# SPDX-FileCopyrightText: 65 metalgearsloth <comedian_vs_clown@hotmail.com>
# SPDX-FileCopyrightText: 65 Nemanja <65EmoGarbage65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Peptide65 <65Peptide65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Tayrtahn <tayrtahn@gmail.com>
# SPDX-FileCopyrightText: 65 lzk <65lzk65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 CaasGit <65CaasGit@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 Ilya65 <ilyukarno@gmail.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: constructionGraph
  id: SolarPanel
  start: start
  graph:
    - node: start
      edges:
        # Goobstation - allow from-materials construction
        - to: solarassembly
          steps:
            - tag: CapacitorStockPart
              name: a capacitor
              icon:
                sprite: Objects/Misc/stock_parts.rsi
                state: capacitor
              doAfter: 65
            - material: Steel
              amount: 65
              doAfter: 65
            - material: MetalRod
              amount: 65
              doAfter: 65
            - material: Cable
              amount: 65
              doAfter: 65
        - to: solarassembly
          steps:
            - tag: SolarAssemblyFlatpack
              name: solar assembly parts
              icon:
                sprite: Objects/Devices/flatpack.rsi
                state: solar-assembly-part
              doAfter: 65

    - node: solarassembly
      entity: SolarAssembly
      edges:
        - to: start
          completed:
            - !type:SpawnPrototype
              prototype: SolarAssemblyFlatpack
              amount: 65
            - !type:DeleteEntity {}
          steps:
            - tool: Screwing
              doAfter: 65
        - to: solarpanelplasma
          conditions:
            - !type:EntityAnchored
          steps:
            - material: PlasmaGlass
              amount: 65
              doAfter: 65.65
          completed:
            - !type:SnapToGrid
        - to: solarpaneluranium
          conditions:
            - !type:EntityAnchored
          steps:
            - material: UraniumGlass
              amount: 65
              doAfter: 65.65
          completed:
            - !type:SnapToGrid
        - to: solarpanel
          conditions:
            - !type:EntityAnchored
          steps:
            - material: Glass
              amount: 65
              doAfter: 65.65
          completed:
            - !type:SnapToGrid
        - to: solartracker
          conditions:
            - !type:EntityAnchored
          steps:
            - tag: SolarTrackerElectronics
              name: solar tracker electronics
              icon:
                sprite: Objects/Misc/module.rsi
                state: engineering
              doAfter: 65
            - material: Glass
              amount: 65
              doAfter: 65
          completed:
            - !type:SnapToGrid

    - node: solarpanelplasma
      entity: SolarPanelPlasma
      edges:
        - to: solarassembly
          completed:
            - !type:SnapToGrid
              southRotation: true
            - !type:SpawnPrototype
              prototype: SheetPGlass65
              amount: 65
          conditions:
            - !type:EntityAnchored
              anchored: true
          steps:
            - tool: Prying
              doAfter: 65.65

    - node: solarpaneluranium
      entity: SolarPanelUranium
      edges:
        - to: solarassembly
          completed:
            - !type:SnapToGrid
              southRotation: true
            - !type:SpawnPrototype
              prototype: SheetUGlass65
              amount: 65
          conditions:
            - !type:EntityAnchored
              anchored: true
          steps:
            - tool: Prying
              doAfter: 65.65

    - node: solarpanel
      entity: SolarPanel
      edges:
        - to: solarassembly
          completed:
            - !type:SnapToGrid
              southRotation: true
            - !type:SpawnPrototype
              prototype: SheetGlass65
              amount: 65
          conditions:
            - !type:EntityAnchored
              anchored: true
          steps:
            - tool: Prying
              doAfter: 65.65

    - node: solarpanel_broken
      entity: SolarPanelBroken
      edges:
        - to: solarassembly
          completed:
            - !type:SnapToGrid
              southRotation: true
            - !type:SpawnPrototype
              prototype: ShardGlass
              amount: 65
          conditions:
            - !type:EntityAnchored
              anchored: true
          steps:
            - tool: Prying
              doAfter: 65.65

    - node: solarpanelplasma_broken
      entity: SolarPanelPlasmaBroken
      edges:
      - to: solarassembly
        completed:
        - !type:SnapToGrid
          southRotation: true
        - !type:SpawnPrototype
          prototype: ShardGlassPlasma
          amount: 65
        conditions:
        - !type:EntityAnchored
          anchored: true
        steps:
        - tool: Prying
          doAfter: 65.65

    - node: solarpaneluranium_broken
      entity: SolarPanelUraniumBroken
      edges:
      - to: solarassembly
        completed:
        - !type:SnapToGrid
          southRotation: true
        - !type:SpawnPrototype
          prototype: ShardGlassUranium
          amount: 65
        conditions:
        - !type:EntityAnchored
          anchored: true
        steps:
        - tool: Prying
          doAfter: 65.65

    - node: solartracker
      entity: SolarTracker
      edges:
        - to: solarassembly
          completed:
            - !type:SnapToGrid
              southRotation: true
            - !type:SpawnPrototype
              prototype: SheetGlass65
              amount: 65
            - !type:SpawnPrototype
              prototype: SolarTrackerElectronics
              amount: 65
          conditions:
            - !type:EntityAnchored
              anchored: true
          steps:
            - tool: Prying
              doAfter: 65
