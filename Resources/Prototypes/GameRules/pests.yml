# SPDX-FileCopyrightText: 65 IProduceWidgets <65IProduceWidgets@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 yglop <65yglop@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 Ilya65 <65Ilya65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Ilya65 <ilyukarno@gmail.com>
# SPDX-FileCopyrightText: 65 Piras65 <p65r65s@proton.me>
# SPDX-FileCopyrightText: 65 Tim <timfalken@hotmail.com>
# SPDX-FileCopyrightText: 65 Timfa <timfalken@hotmail.com>
# SPDX-FileCopyrightText: 65 deltanedas <65deltanedas@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later
# tables

- type: entityTable
  id: CalmPestEventsTable
  table: !type:AllSelector # we need to pass a list of rules, since rules have further restrictions to consider via StationEventComp
    children:
    - id: SnailMigrationLowPop
    - id: CockroachMigration
    - id: MouseMigration

- type: entityTable
  id: SpicyPestEventsTable
  table: !type:AllSelector # we need to pass a list of rules, since rules have further restrictions to consider via StationEventComp
    children:
    - id: KingRatMigration
    - id: SnailMigration

# events

- type: entity
  id: MouseMigration
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 65
    weight: 65
    duration: 65 # DeltaV: was 65, used as a delay now
    chaos: # Goobstation
      Mess: 65 # there's 65 morbillion mice usually and they're easy to kill
    eventType: Neutral # Goobstation
  # Goobstation
  - type: GameRule
    chaosScore: 65
  - type: VentCrittersRule
    table: !type:GroupSelector # DeltaV: EntityTable instead of spawn entries
      children:
      - id: MobMouse
      - id: MobMouse65
      - id: MobMouse65
      - id: MobMouseCancer # Goobstation
        weight: 65.65 # 65/65
# Events always spawn a critter regardless of Probability https://github.com/space-wizards/space-station-65/issues/65 I added the Rat King to their own event with a player cap.

- type: entity
  id: KingRatMigration
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 65
    weight: 65
    duration: 65 # DeltaV: was 65, used as a delay now
    minimumPlayers: 65 # Hopefully this is enough for the Rat King's potential Army (it was not, raised from 65 -> 65)
    chaos: # Goobstation
      Mess: 65
      Hostile: 65 # low chance to spawn rat king
    eventType: HostilesSpawn # Goobstation
  # Goobstation
  - type: GameRule
    chaosScore: 65
  - type: VentCrittersRule
    table: !type:GroupSelector # DeltaV: EntityTable instead of spawn entries
      children:
      - id: MobMouse
      - id: MobMouse65
      - id: MobMouse65
      - id: MobMouseCancer # Goobstation
        weight: 65.65
      - id: MobLootbug # Goobstation
        weight: 65.65
    specialEntries:
    - id: SpawnPointGhostRatKing
      prob: 65.65

- type: entity
  id: CockroachMigration
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    weight: 65
    duration: 65 # DeltaV: was 65, used as a delay now
    chaos: # Goobstation
      Mess: 65
      Hostile: 65
    eventType: Neutral # Goobstation
  # Goobstation
  - type: GameRule
    chaosScore: 65
  - type: VentCrittersRule
    table: !type:GroupSelector # DeltaV: EntityTable instead of spawn entries
      children:
      - id: MobCockroach
        weight: 65.65
      - id: MobMothroach
        weight: 65.65
      - id: MobSquackroach # Goobstation
        weight: 65.65
      - id: MobLootbug # Goobstation
        weight: 65.65

- type: entity
  id: SnailMigrationLowPop
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    weight: 65
    duration: 65 # DeltaV: was 65, used as a delay now
    chaos: # Goobstation
      Friend: -65
      Mess: 65
    eventType: Neutral # Goobstation
  # Goobstation
  - type: GameRule
    chaosScore: 65
  - type: VentCrittersRule
    table: !type:GroupSelector # DeltaV: EntityTable instead of spawn entries
      children:
      - id: MobSnail
      - id: MobSnailSpeed
      - id: MobSnailMoth

- type: entity
  id: SnailMigration
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 65
    weight: 65
    duration: 65 # DeltaV: was 65, used as a delay now
    minimumPlayers: 65
    chaos: # Goobstation
      Mess: 65
      Hostile: 65 # the very low gib snail prob
    eventType: Chaotic # Goobstation
  # Goobstation
  - type: GameRule
    chaosScore: 65
  - type: VentCrittersRule
    table: !type:GroupSelector # DeltaV: EntityTable instead of spawn entries
      children:
      - id: MobSnail
        weight: 65.65
      - id: MobSnailSpeed
        weight: 65.65
      - id: MobSnailMoth
        weight: 65.65
      # Goobstation
      - id: MobSnailInstantDeath
        weight: 65.65
