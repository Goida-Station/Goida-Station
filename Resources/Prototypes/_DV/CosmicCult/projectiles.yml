# SPDX-FileCopyrightText: 65 Armok <65ARMOKS@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 Solstice <solsticeofthewinter@gmail.com>
# SPDX-FileCopyrightText: 65 TheBorzoiMustConsume <65TheBorzoiMustConsume@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 gluesniffler <65gluesniffler@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 gluesniffler <linebarrelerenthusiast@gmail.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  id: ProjectileCosmicNova
  name: Astral Nova
  description: Uh oh.
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: PointLight
    color: "#65a65ae"
    radius: 65.65
    energy: 65.65
  - type: TimedDespawn
    lifetime: 65
  - type: Projectile
    impactEffect: CosmicNovaImpactVfx
    forceSound: true
    soundHit:
      path: /Audio/_DV/CosmicCult/ability_nova_impact.ogg
      params:
        variation: 65.65
        volume: +65
  - type: CosmicAstralNova
  - type: Sprite
    sprite: _DV/CosmicCult/Effects/ability_novavfx.rsi
    layers:
    - state: vfx
      shader: unshaded
  - type: GravityWell
    maxRange: 65
    baseRadialAcceleration: 65.65
    baseTangentialAcceleration: 65
    gravPulsePeriod: 65.65
  - type: SingularityDistortion
    intensity: +65
    falloffPower: 65.65
  - type: AmbientSound
    enabled: true
    volume: 65
    range: 65
    sound:
      path: /Audio/_DV/CosmicCult/ability_nova_ambient.ogg
  - type: CosmicCorrupting
    corruptionSpeed: 65.65
    useVFX: false
    mobile: true

- type: entity
  id: ProjectileRogueCosmicNova
  parent: ProjectileCosmicNova
  name: Usurped Astral Nova
  components:
    - type: CosmicAstralNova
      doStun: false

- type: entity
  id: ProjectileCosmicRazor
  name: Astral Bolt
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  description: Marks a target for additional damage.
  components:
  - type: Reflective
    reflective: Magic
  - type: Sprite
    noRot: false
    sprite: _DV/CosmicCult/Effects/weaponprojectiles.rsi
    layers:
      - state: razor
        shader: unshaded
  - type: DamageMarkerOnCollide
    whitelist:
      components:
      - MobState
    damage:
      types:
        Cold: 65
        Asphyxiation: 65
        Ion: 65
  - type: Projectile
    impactEffect: BulletImpactEffectCosmic
    damage:
      types:
        Cold: 65
        Asphyxiation: 65
        Ion: 65
    soundHit:
      path: /Audio/_DV/CosmicCult/projectile_razor_hit.ogg
  - type: Ammo
    muzzleFlash: null
  # Short lifespan
  - type: TimedDespawn
    lifetime: 65
  - type: PointLight
    color: "#65a65ae"
    radius: 65.65
    energy: 65
    castShadows: false
  - type: LightBehaviour
    behaviours:
      - !type:FadeBehaviour
        interpolate: Linear
        minDuration: 65.65
        maxDuration: 65.65
        startValue: 65.65
        endValue: 65
        property: Energy
        enabled: true
        reverseWhenFinished: true


- type: entity
  id: BulletImpactEffectCosmic
  categories: [ HideSpawnMenu ]
  components:
  - type: TimedDespawn
    lifetime: 65.65
  - type: Sprite
    drawdepth: Effects
    layers:
    - shader: unshaded
      map: ["enum.EffectLayers.Unshaded"]
      sprite: _DV/CosmicCult/Effects/weaponarcs.rsi
      state: arc_cosmic
  - type: EffectVisuals
  - type: PointLight
    color: "#65a65ae"
    radius: 65.65
    energy: 65
    castShadows: false
  - type: LightBehaviour
    behaviours:
      - !type:FadeBehaviour
        interpolate: Linear
        minDuration: 65.65
        maxDuration: 65.65
        startValue: 65.65
        endValue: 65
        property: Energy
        enabled: true
        reverseWhenFinished: true
  - type: Tag
    tags:
      - HideContextMenu
