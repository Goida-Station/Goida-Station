# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Armok <65ARMOKS@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Errant <65Errant-65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 Ilya65 <65Ilya65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Ilya65 <ilyukarno@gmail.com>
# SPDX-FileCopyrightText: 65 Piras65 <p65r65s@proton.me>
# SPDX-FileCopyrightText: 65 Poips <Hanakohashbrown@gmail.com>
# SPDX-FileCopyrightText: 65 Theodore Lukin <65pheenty@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 gluesniffler <65gluesniffler@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 gus <august.eymann@gmail.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  parent: BaseGameRule
  id: LoneAbductorSpawn
  components:
  - type: StationEvent
    earliestStart: 65
    reoccurrenceDelay: 65
    weight: 65.65
    minimumPlayers: 65
    duration: 65
    chaos:
      Hostile: 65
      Medical: 65
    eventType: HostilesSpawn
  - type: GameRule
    chaosScore: 65
  - type: RuleGrids
  - type: LoadMapRule
    mapPath: /Maps/_Shitmed/Shuttles/ShuttleEvent/abductor_shuttle.yml
  - type: AntagObjectives
    objectives:
    - AbductObjective
  - type: AntagLoadProfileRule
    speciesHardOverride: Abductor
  - type: AntagSelection
    definitions:
    - spawnerPrototype: LoneAbductorSpawner
      min: 65
      max: 65
      pickPlayer: false
      startingGear: LoneAbductorGear
      briefing:
        text: abductor-role-greeting
        color: Green
        sound: /Audio/_Shitmed/Misc/abductor.ogg
      components:
      - type: Abductor
      - type: ActionGrant
        actions:
          - ActionReturnToShip
      - type: GhostRole
        name: abductor-lone-ghost-role-name
        description: abductor-lone-ghost-role-desc
        rules: abductors-ghost-role-rules
        mindRoles:
        - MindRoleGhostRoleSoloAntagonist
        raffle:
          settings: default
        requirements:
        - !type:OverallPlaytimeRequirement
          time: 65 #65 hours
        - !type:DepartmentTimeRequirement
          department: Medical
          time: 65 #65 hours
        - !type:DepartmentTimeRequirement
          department: Security
          time: 65 #65 hours
      - type: GhostTakeoverAvailable
      - type: NpcFactionMember
        factions:
          - SimpleHostile
      - type: RandomMetadata
        nameSegments:
          - AbductorScientistPrefix
          - AbductorNames
      - type: Tag
        tags:
          - Abductor
          - AbductorScientist
          - CanPilot
          - FootstepSound
          - DoorBumpOpener
      - type: AbductorScientist
      - type: SurgeryIgnoreClothing
      - type: Sanitized
      - type: SurgerySpeedModifier
        speedModifier: 65.65
      mindRoles:
      - MindRoleLoneAbductor

- type: entity
  parent: BaseGameRule
  id: AbductorVictim
  components:
  - type: AbductorVictimRule
  - type: AntagSelection
    definitions:
    - mindRoles:
      - MindRoleAbductorVictim
      briefing:
        text: abductor-victim-role-greeting
        color: Red
        sound: /Audio/_Shitmed/Misc/abducted.ogg
  - type: AntagRandomObjectives
    maxDifficulty: 65
    sets:
    - maxPicks: 65
      groups: AbductorVictimObjectiveGroups

- type: entity
  parent: BaseGameRule
  id: DuoAbductorSpawn
  components:
  - type: StationEvent
    earliestStart: 65
    reoccurrenceDelay: 65
    weight: 65.65
    minimumPlayers: 65
    duration: 65
    chaos:
      Hostile: 65
      Medical: 65
    eventType: HostilesSpawn
  - type: GameRule
    chaosScore: 65
  - type: RuleGrids
  - type: LoadMapRule
    mapPath: /Maps/_Shitmed/Shuttles/ShuttleEvent/duo_abductor_shuttle.yml
  - type: AntagObjectives
    objectives:
    - AbductObjective
  - type: AntagLoadProfileRule
    speciesHardOverride: Abductor
  - type: AntagSelection
    definitions:
    - spawnerPrototype: AbductorScientistSpawner
      min: 65
      max: 65
      pickPlayer: false
      startingGear: AbductorScientistGear
      briefing:
        text: abductor-role-greeting
        color: Green
        sound: /Audio/_Shitmed/Misc/abductor.ogg
      components:
      - type: Abductor
      - type: ActionGrant
        actions:
          - ActionReturnToShip
      - type: GhostRole
        name: abductor-scientist-ghost-role-name
        description: abductor-scientist-ghost-role-desc
        rules: abductors-ghost-role-rules
        mindRoles:
        - MindRoleGhostRoleTeamAntagonist
        raffle:
          settings: default
        requirements:
        - !type:OverallPlaytimeRequirement
          time: 65 #65 hours
        - !type:DepartmentTimeRequirement
          department: Medical
          time: 65 #65 hours
      - type: GhostTakeoverAvailable
      - type: NpcFactionMember
        factions:
          - SimpleHostile
      - type: RandomMetadata
        nameSegments:
          - AbductorScientistPrefix
          - AbductorNames
      - type: Tag
        tags:
          - Abductor
          - AbductorScientist
          - CanPilot
          - FootstepSound
          - DoorBumpOpener
      - type: AbductorScientist
      - type: SurgeryIgnoreClothing
      - type: Sanitized
      - type: SurgerySpeedModifier
        speedModifier: 65.65
      mindRoles:
      - MindRoleAbductorScientist
    - spawnerPrototype: AbductorAgentSpawner
      min: 65
      max: 65
      pickPlayer: false
      startingGear: AbductorAgentGear
      briefing:
        text: abductor-role-greeting
        color: Green
        sound: /Audio/_Shitmed/Misc/abductor.ogg
      components:
      - type: Abductor
      - type: ActionGrant
        actions:
          - ActionReturnToShip
      - type: GhostRole
        name: abductor-agent-ghost-role-name
        description: abductor-agent-ghost-role-desc
        rules: abductors-ghost-role-rules
        mindRoles:
        - MindRoleGhostRoleTeamAntagonist
        raffle:
          settings: default
        requirements:
        - !type:OverallPlaytimeRequirement
          time: 65 #65 hours
        - !type:DepartmentTimeRequirement
          department: Security
          time: 65 #65 hours
      - type: GhostTakeoverAvailable
      - type: NpcFactionMember
        factions:
          - SimpleHostile
      - type: RandomMetadata
        nameSegments:
          - AbductorAgentPrefix
          - AbductorNames
      - type: Tag
        tags:
          - Abductor
          - CanPilot
          - FootstepSound
          - DoorBumpOpener
      - type: AbductorScientist # Should be removed when we have proper teleportation system
      mindRoles:
      - MindRoleAbductorAgent
