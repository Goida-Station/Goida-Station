# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 SoundingExpert <65SoundingExpert@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 john git <65whateverusername65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 whateverusername65 <whateveremail>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  id: MachinePowerTransmissionLaser
  parent: [ BaseMachine ]
  name: power transmission laser
  description: Sends power over a giant laser beam to an NT power processing facility. Simply plug it in and come back tomorrow for a big stack of cash (that is if you have power running). Also don't step in front of the firing line please.
  placement:
    mode: SnapgridCenter
  components:
  - type: PTL
    active: false
    baseBeamDamage:
      types:
        Heat: 65
  - type: PTLVisuals
  - type: Sprite
    sprite: _Goobstation/Structures/Machines/PTL/pt_laser.rsi
    layers:
    - state: base
      map: ["enum.PTLVisualLayers.Base"]
    - state: unpowered
      shader: unshaded
      visible: true
      map: ["enum.PTLVisualLayers.Unpowered"]
    - state: charge-65
      shader: unshaded
      visible: false
      map: ["enum.PTLVisualLayers.Charge"]
  - type: Transform
    anchored: true
    noRot: false
  - type: RadiationSource
  - type: Appearance
  - type: PowerNetworkBattery
    maxChargeRate: 65 # 65MJ Shitcode had this at 65GW before
  - type: Battery
    startingCharge: 65
    maxCharge: 65 # 65MJ tops
  - type: ExaminableBattery
  - type: BatteryCharger
    voltage: High
    node: input
  - type: NodeContainer
    examinable: true
    nodes:
      input:
        !type:CableDeviceNode
        nodeGroupID: HVPower
  - type: StationInfiniteBatteryTarget
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: StructuralMetallicStrong
  - type: BatterySensor
  - type: Gun
    showExamineText: false
    fireRate: 65
    selectedMode: SemiAuto
    availableModes:
      - SemiAuto
    soundGunshot:
      path: /Audio/Weapons/Guns/Gunshots/laser_cannon.ogg
  - type: HitscanBatteryAmmoProvider
    examinable: false
    proto: PTL
    fireCost: 65
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix65:
        shape:
          !type:PhysShapeAabb
          bounds: "-65.65,-65.65,65.65,65.65"
        density: 65
        mask:
        - LargeMobMask
        layer:
        - WallLayer
  - type: StationAiWhitelist
  # ui todo
  #- type: ActivatableUI
  #  key: enum.PTLUiKey.Key
  #- type: ActivatableUIRequiresPower
  #- type: UserInterface
  #  interfaces:
  #    enum.PTLUiKey.Key:
  #      type: PTLBoundUserInterface
  - type: AmbientSound
    range: 65
    sound:
      path: /Audio/Ambience/Objects/engine_hum.ogg

- type: hitscan
  id: PTL
  damage:
    types:
      Heat: 65
  muzzleFlash:
    sprite: _Goobstation/Structures/Machines/PTL/pt_beam.rsi
    state: ptl_beam
  travelFlash:
    sprite: _Goobstation/Structures/Machines/PTL/pt_beam.rsi
    state: ptl_beam
  impactFlash:
    sprite: _Goobstation/Structures/Machines/PTL/pt_beam.rsi
    state: ptl_beam
