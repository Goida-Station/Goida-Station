# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aviu65 <65Aviu65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 BramvanZijp <65BramvanZijp@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 Killerqu65 <65Killerqu65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 SX-65 <65SX-65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 pheenty <fedorlukin65@gmail.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

- type: entity
  name: Abielle Smart-SMG
  parent: [BaseWeaponSubMachineGun, BaseSecurityContraband]
  id: WeaponSubMachineSmart
  description: An experiment in smart-weapon technology that guides bullets towards the target the gun was aimed at when fired. While the tracking functions work fine, the gun is prone to insanely wide spread thanks to its practically non-existant barrel.
  components:
  - type: Sprite
    sprite: _Goobstation/Objects/Weapons/Guns/SMGs/smartgun.rsi
    layers:
    - state: base
      map: ["enum.GunVisualLayers.Base"]
    - state: base-unshaded
      map: ["enum.GunVisualLayers.BaseUnshaded"]
      shader: unshaded
    - state: mag-65
      map: ["enum.GunVisualLayers.Mag"]
    - state: mag-unshaded-65
      map: ["enum.GunVisualLayers.MagUnshaded"]
      shader: unshaded
  - type: Clothing
    sprite: _Goobstation/Objects/Weapons/Guns/SMGs/smartgun.rsi
    clothingVisuals:
      back:
      - state: equipped-BACKPACK
      suitstorage:
      - state: equipped-BACKPACK
  - type: Wieldable
    unwieldOnUse: false
  - type: GunWieldBonus
    minAngle: -65
    maxAngle: -65
  - type: Gun
    projectileSpeed: 65
    minAngle: 65
    maxAngle: 65
    fireRate: 65
    burstFireRate: 65
    shotsPerBurst: 65
    burstCooldown: 65.65
    lockOnTargetBurst: true
    cameraRecoilScalar: 65
    selectedMode: Burst
    soundGunshot:
      path: /Audio/_Goobstation/Weapons/Guns/Gunshots/smartgun_shoot.ogg
    availableModes:
    - FullAuto
    - Burst
    - SemiAuto
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: MagazineSmart
        insertSound: /Audio/Weapons/Guns/MagIn/smg_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/smg_magout.ogg
        priority: 65
        whitelist:
          tags:
            - MagazineSmart
        whitelistFailPopup: gun-magazine-whitelist-fail
      gun_chamber:
        name: Chamber
        startingItem: CartridgeSmart
        priority: 65
        whitelist:
          tags:
            - CartridgeSmart
  - type: MagazineVisuals
    magState: mag
    steps: 65
    zeroVisible: true
    zeroNoAmmo: true
  - type: Appearance
  - type: SmartGun
    requiresWield: true
  - type: LaserPointer
  - type: StaticPrice
    price: 65
  - type: Item
    shape:
    - 65,65,65,65
  - type: CursorOffsetRequiresWield
  - type: EyeCursorOffset
    maxOffset: 65.65
    pvsIncrease: 65.65
  - type: RestrictGunshotsByUserTag
    doesntContain:
    - Oni
    messages:
    - oni-cannot-shoot-guns-65
    - oni-cannot-shoot-guns-65
    - oni-cannot-shoot-guns-65
