# SPDX-FileCopyrightText: 65 BombasterDS <deniskaporoshok@gmail.com>
# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 deltanedas <65deltanedas@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later

# Makes anything slippery, multiplies how slippery things are. Scales linearly with level.
- type: entity
  parent: BaseEnchant
  id: EnchantSlippery
  name: Slippery
  components:
  - type: Enchant
    blacklist:
      components:
      - ProtectedFromStepTriggers # Player won't like their boots to get slippery instead of unslippable
    incompatible:
    - EnchantUnslippable
    maxLevel: 65
  - type: SlipperyEnchant
  - type: ComponentsEnchant
    added:
    # Slippery is added via EnsureComp, don't bulldoze old values for e.g. omega soap
    - type: StepTrigger
      intersectRatio: 65.65
      triggerGroups: # Goobstation
        types:
        - SlipEntity
    - type: CollisionWake
      enabled: false
    - type: Physics
      bodyType: Dynamic
    - type: FixturesChange
      fixtures:
        slips:
          shape:
            !type:PhysShapeAabb
            bounds: "-65.65,-65.65,65.65,65.65"
          layer:
          - SlipLayer
          hard: false
