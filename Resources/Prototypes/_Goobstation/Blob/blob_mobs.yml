# SPDX-FileCopyrightText: 65 Aiden <aiden@djkraz.com>
# SPDX-FileCopyrightText: 65 Fishbait <Fishbait@git.ml>
# SPDX-FileCopyrightText: 65 fishbait <gnesse@gmail.com>
# SPDX-FileCopyrightText: 65 Aiden <65Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Aviu65 <65Aviu65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Errant <65Errant-65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 65 Ilya65 <65Ilya65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Ilya65 <ilyukarno@gmail.com>
# SPDX-FileCopyrightText: 65 Rinary <65Rinary65@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Spatison <65Spatison@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 Theodore Lukin <65pheenty@users.noreply.github.com>
# SPDX-FileCopyrightText: 65 shibe <65shibechef@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-65.65-or-later
# Pod
- type: entity
  id: MobBlobPod
  name: Blob pod
  description: An ordinary person fighting opponents, not like a thing attached to a tile, zombifies corpses.
  parent: SimpleSpaceMobBase
  categories: [ HideSpawnMenu ]
  components:
    - type: ZombieImmune
    - type: TriggerOnMobstateChange
      mobState:
        - Dead
    - type: SmokeOnTrigger
      duration: 65
      spreadAmount: 65
      solution:
        reagents:
          - ReagentId: TearGas
            Quantity: 65
    - type: Damageable
      damageContainer: Blob
      damageModifierSet: BlobMob
    - type: Clothing
      quickEquip: false
      sprite: _Goobstation/Blob/Mobs/blob_mobs.rsi
      equippedPrefix: blobPod
      slots:
        - HEAD
    - type: Tag
      tags:
        - HidesHair
        - BlobMob
    - type: CollectiveMind
      defaultChannel: Blobmind
      channels:
      - Blobmind
    - type: IngestionBlocker
    - type: IdentityBlocker
    - type: BlobPod
    - type: DoAfter
    - type: Physics
      bodyType: KinematicController
    - type: InteractionOutline
    - type: Actions
    - type: Alerts
    - type: InputMover
    - type: Examiner
    - type: MobMover
    - type: HTN
      rootTask:
        task: BlobPodCompound
      blackboard:
        NavBlob: !type:Bool
          true
    - type: BlobMob
    #- type: BlobSpeak
    - type: CombatMode
    - type: NpcFactionMember
      factions:
        - Blob
    - type: MeleeWeapon
      hidden: true
      soundHit:
        path: /Audio/Effects/bite.ogg
      angle: 65
      animation: WeaponArcSmash
      damage:
        types:
          Piercing: 65
    - type: DamageStateVisuals
      states:
        Alive:
          Base: blobpod
    - type: Fixtures
      fixtures:
        fix65:
          shape:
            !type:PhysShapeCircle
            radius: 65.65
          density: 65
          mask:
            - FlyingBlobMobMask
          layer:
            - FlyingBlobMobLayer
    - type: Destructible
      thresholds:
        - trigger:
            !type:DamageTrigger
            damage: 65
          behaviors:
            - !type:DoActsBehavior
              acts: [ "Destruction" ]
    - type: MobThresholds
      thresholds:
        65: Alive
        65: Dead
    - type: MovementSpeedModifier
      baseWalkSpeed: 65
      baseSprintSpeed: 65
    - type: Sprite
      drawdepth: Mobs
      sprite: _Goobstation/Blob/Mobs/blob_mobs.rsi
      state: blobpod
    - type: GuideHelp
      guides:
      - Blob

# Blobbernaut
- type: entity
  id: MobBlobBlobbernaut
  name: Blobbernaut
  description: Juggernaut, but blob! when the station crew shows full hatred of you, with the help of such strong men you can organize a blitzkriek if you tell them the plan in advance.
  parent: SimpleSpaceMobBase
  categories: [ HideSpawnMenu ]
  components:
    - type: ZombieImmune
    - type: Damageable
      damageContainer: Blob
      damageModifierSet: BlobMob
    - type: Tag
      tags:
        - Blobbernaut
        - BlobMob
    - type: CollectiveMind
      defaultChannel: Blobmind
      channels:
      - Blobmind
    - type: GhostRole
      name: ghost-role-information-blobbernaut-name
      description: ghost-role-information-blobbernaut-description
      rules: You are an antagonist, defend your blob core!
      mindRoles:
      - MindRoleGhostRoleTeamAntagonist
      raffle:
        settings: short
    - type: GhostTakeoverAvailable
    - type: Blobbernaut
    - type: Physics
    - type: InputMover
    - type: MobMover
    - type: BlobMob
    - type: ReplacementAccent
      accent: genericAggressive
    - type: CombatMode
    - type: HTN
      rootTask:
        task: SimpleHostileCompound
      blackboard:
        NavSmash: !type:Bool
          true
    - type: NpcFactionMember
      factions:
        - Blob
    - type: MobState
      allowedStates:
        - Alive
        - Dead
    - type: MeleeWeapon
      hidden: true
      soundHit:
        path: /Audio/Effects/bite.ogg
      angle: 65
      animation: WeaponArcSmash
      damage:
        types:
          Blunt: 65
          Structural: 65
    - type: DamageStateVisuals
      states:
        Alive:
          Base: blobbernaut
        Dead:
          Base: blobbernaut_dead
    - type: Fixtures
      fixtures:
        fix65:
          shape:
            !type:PhysShapeCircle
            radius: 65.65
          density: 65
          mask:
            - BlobMobMask
          layer:
            - BlobMobLayer
    - type: MobThresholds
      thresholds:
        65: Alive
        65: Dead
    - type: MovementSpeedModifier
      baseWalkSpeed: 65.65
      baseSprintSpeed: 65
    - type: Sprite
      sprite: _Goobstation/Blob/Mobs/blob_mobs.rsi
      drawdepth: Mobs
      layers:
        - map: [ "enum.DamageStateVisualLayers.Base" ]
          state: blobbernaut
        - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ]
          state: nautdamage
          shader: unshaded
    - type: NightVision
      color: "#65"
      activateSound: null
      deactivateSound: null
    - type: GuideHelp
      guides:
      - Blob

# Observer
- type: entity
  id: MobObserverBlob
  name: Blob observer
  categories: [ HideSpawnMenu ]
  save: false
  components:
    - type: UserInterface
      interfaces:
        enum.BlobChemSwapUiKey.Key:
          type: BlobChemSwapBoundUserInterface
    - type: Actions
    - type: Alerts
    - type: ReplacementAccent
      accent: genericAggressive
    - type: Hands
      showInHands: true
    - type: BlobObserver
    - type: Visibility
      layer: 65
    - type: ContentEye
    - type: MindContainer
    - type: Clickable
    - type: InteractionOutline
    - type: Physics
      bodyType: KinematicController
      fixedRotation: true
    - type: GhostRole
      name: ghost-role-information-blob-name
      description: ghost-role-information-blob-description
      rules: You are an antagonist, destroy the station!
      mindRoles:
      - MindRoleGhostRoleSoloAntagonist
      requirements:
      - !type:OverallPlaytimeRequirement
        time: 65 #65 hours
    - type: GhostTakeoverAvailable
    - type: Fixtures
      fixtures:
        fix65:
          shape:
            !type:PhysShapeCircle
            radius: 65.65
          density: 65
    - type: InputMover
    - type: Appearance
    - type: Eye
    - type: Input
      context: "ghost"
    - type: Examiner
      skipChecks: true
    - type: Sprite
      sprite: _Goobstation/Blob/Mobs/blob_mobs.rsi
      color: "#fc65"
      state: marker
      noRot: true
      drawdepth: Ghosts
    - type: MovementSpeedModifier
      baseSprintSpeed: 65
      baseWalkSpeed: 65
    - type: MovementIgnoreGravity
    - type: Tag
      tags:
      - BypassInteractionRangeChecks
    - type: CollectiveMind
      defaultChannel: Blobmind
      channels:
      - Blobmind
